import{c as ce,r as h,j as p,u as we,P as O,l as y,k as G,q as xe,F as Me,v as Oe,w as Dt,x as Tt,s as ue,y as kt,G as It,H as At,I as Nt,J as Ot,K as jt,L as Lt,z as Ft,B as Gt,E as Wt,g as je,M as $t,N as Bt,Q as Kt,U as Ut,t as zt}from"./ui-vendor-rA8IexKS.js";import{f as Le,u as Fe,g as Ht}from"./index-DHJEQtTr.js";import{c as z}from"./index-hSqt8rb2.js";var ge="rovingFocusGroup.onEntryFocus",Vt={bubbles:!1,cancelable:!0},Q="RovingFocusGroup",[ye,Ge,Xt]=Le(Q),[Yt,We]=ce(Q,[Xt]),[qt,Jt]=Yt(Q),$e=h.forwardRef((r,e)=>p.jsx(ye.Provider,{scope:r.__scopeRovingFocusGroup,children:p.jsx(ye.Slot,{scope:r.__scopeRovingFocusGroup,children:p.jsx(Qt,{...r,ref:e})})}));$e.displayName=Q;var Qt=h.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:o=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:a=!1,...d}=r,f=h.useRef(null),v=G(e,f),m=Fe(i),[E,g]=xe({prop:s,defaultProp:c??null,onChange:l,caller:Q}),[b,S]=h.useState(!1),M=Me(u),x=Ge(t),C=h.useRef(!1),[D,_]=h.useState(0);return h.useEffect(()=>{const R=f.current;if(R)return R.addEventListener(ge,M),()=>R.removeEventListener(ge,M)},[M]),p.jsx(qt,{scope:t,orientation:n,dir:m,loop:o,currentTabStopId:E,onItemFocus:h.useCallback(R=>g(R),[g]),onItemShiftTab:h.useCallback(()=>S(!0),[]),onFocusableItemAdd:h.useCallback(()=>_(R=>R+1),[]),onFocusableItemRemove:h.useCallback(()=>_(R=>R-1),[]),children:p.jsx(O.div,{tabIndex:b||D===0?-1:0,"data-orientation":n,...d,ref:v,style:{outline:"none",...r.style},onMouseDown:y(r.onMouseDown,()=>{C.current=!0}),onFocus:y(r.onFocus,R=>{const I=!C.current;if(R.target===R.currentTarget&&I&&!b){const T=new CustomEvent(ge,Vt);if(R.currentTarget.dispatchEvent(T),!T.defaultPrevented){const L=x().filter(j=>j.focusable),F=L.find(j=>j.active),ne=L.find(j=>j.id===E),fe=[F,ne,...L].filter(Boolean).map(j=>j.ref.current);Ue(fe,a)}}C.current=!1}),onBlur:y(r.onBlur,()=>S(!1))})})}),Be="RovingFocusGroupItem",Ke=h.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:o=!1,tabStopId:i,children:s,...c}=r,l=we(),u=i||l,a=Jt(Be,t),d=a.currentTabStopId===u,f=Ge(t),{onFocusableItemAdd:v,onFocusableItemRemove:m,currentTabStopId:E}=a;return h.useEffect(()=>{if(n)return v(),()=>m()},[n,v,m]),p.jsx(ye.ItemSlot,{scope:t,id:u,focusable:n,active:o,children:p.jsx(O.span,{tabIndex:d?0:-1,"data-orientation":a.orientation,...c,ref:e,onMouseDown:y(r.onMouseDown,g=>{n?a.onItemFocus(u):g.preventDefault()}),onFocus:y(r.onFocus,()=>a.onItemFocus(u)),onKeyDown:y(r.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){a.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const b=tn(g,a.orientation,a.dir);if(b!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let M=f().filter(x=>x.focusable).map(x=>x.ref.current);if(b==="last")M.reverse();else if(b==="prev"||b==="next"){b==="prev"&&M.reverse();const x=M.indexOf(g.currentTarget);M=a.loop?nn(M,x+1):M.slice(x+1)}setTimeout(()=>Ue(M))}}),children:typeof s=="function"?s({isCurrentTabStop:d,hasTabStop:E!=null}):s})})});Ke.displayName=Be;var Zt={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function en(r,e){return e!=="rtl"?r:r==="ArrowLeft"?"ArrowRight":r==="ArrowRight"?"ArrowLeft":r}function tn(r,e,t){const n=en(r.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Zt[n]}function Ue(r,e=!1){const t=document.activeElement;for(const n of r)if(n===t||(n.focus({preventScroll:e}),document.activeElement!==t))return}function nn(r,e){return r.map((t,n)=>r[(e+n)%r.length])}var rn=$e,on=Ke,Ce=["Enter"," "],sn=["ArrowDown","PageUp","Home"],ze=["ArrowUp","PageDown","End"],an=[...sn,...ze],cn={ltr:[...Ce,"ArrowRight"],rtl:[...Ce,"ArrowLeft"]},un={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Z="Menu",[q,dn,ln]=Le(Z),[$,He]=ce(Z,[ln,Oe,We]),de=Oe(),Ve=We(),[hn,B]=$(Z),[pn,ee]=$(Z),Xe=r=>{const{__scopeMenu:e,open:t=!1,children:n,dir:o,onOpenChange:i,modal:s=!0}=r,c=de(e),[l,u]=h.useState(null),a=h.useRef(!1),d=Me(i),f=Fe(o);return h.useEffect(()=>{const v=()=>{a.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>a.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),p.jsx(Dt,{...c,children:p.jsx(hn,{scope:e,open:t,onOpenChange:d,content:l,onContentChange:u,children:p.jsx(pn,{scope:e,onClose:h.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:a,dir:f,modal:s,children:n})})})};Xe.displayName=Z;var fn="MenuAnchor",Se=h.forwardRef((r,e)=>{const{__scopeMenu:t,...n}=r,o=de(t);return p.jsx(Tt,{...o,...n,ref:e})});Se.displayName=fn;var Ee="MenuPortal",[mn,Ye]=$(Ee,{forceMount:void 0}),qe=r=>{const{__scopeMenu:e,forceMount:t,children:n,container:o}=r,i=B(Ee,e);return p.jsx(mn,{scope:e,forceMount:t,children:p.jsx(ue,{present:t||i.open,children:p.jsx(kt,{asChild:!0,container:o,children:n})})})};qe.displayName=Ee;var N="MenuContent",[vn,Re]=$(N),Je=h.forwardRef((r,e)=>{const t=Ye(N,r.__scopeMenu),{forceMount:n=t.forceMount,...o}=r,i=B(N,r.__scopeMenu),s=ee(N,r.__scopeMenu);return p.jsx(q.Provider,{scope:r.__scopeMenu,children:p.jsx(ue,{present:n||i.open,children:p.jsx(q.Slot,{scope:r.__scopeMenu,children:s.modal?p.jsx(gn,{...o,ref:e}):p.jsx(bn,{...o,ref:e})})})})}),gn=h.forwardRef((r,e)=>{const t=B(N,r.__scopeMenu),n=h.useRef(null),o=G(e,n);return h.useEffect(()=>{const i=n.current;if(i)return It(i)},[]),p.jsx(Pe,{...r,ref:o,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:y(r.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),bn=h.forwardRef((r,e)=>{const t=B(N,r.__scopeMenu);return p.jsx(Pe,{...r,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),wn=jt("MenuContent.ScrollLock"),Pe=h.forwardRef((r,e)=>{const{__scopeMenu:t,loop:n=!1,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:c,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:a,onFocusOutside:d,onInteractOutside:f,onDismiss:v,disableOutsideScroll:m,...E}=r,g=B(N,t),b=ee(N,t),S=de(t),M=Ve(t),x=dn(t),[C,D]=h.useState(null),_=h.useRef(null),R=G(e,_,g.onContentChange),I=h.useRef(0),T=h.useRef(""),L=h.useRef(0),F=h.useRef(null),ne=h.useRef("right"),re=h.useRef(0),fe=m?Ot:h.Fragment,j=m?{as:wn,allowPinchZoom:!0}:void 0,_t=w=>{const U=T.current+w,W=x().filter(A=>!A.disabled),V=document.activeElement,me=W.find(A=>A.ref.current===V)?.textValue,ve=W.map(A=>A.textValue),ke=kn(ve,U,me),X=W.find(A=>A.textValue===ke)?.ref.current;(function A(Ie){T.current=Ie,window.clearTimeout(I.current),Ie!==""&&(I.current=window.setTimeout(()=>A(""),1e3))})(U),X&&setTimeout(()=>X.focus())};h.useEffect(()=>()=>window.clearTimeout(I.current),[]),Nt();const K=h.useCallback(w=>ne.current===F.current?.side&&An(w,F.current?.area),[]);return p.jsx(vn,{scope:t,searchRef:T,onItemEnter:h.useCallback(w=>{K(w)&&w.preventDefault()},[K]),onItemLeave:h.useCallback(w=>{K(w)||(_.current?.focus(),D(null))},[K]),onTriggerLeave:h.useCallback(w=>{K(w)&&w.preventDefault()},[K]),pointerGraceTimerRef:L,onPointerGraceIntentChange:h.useCallback(w=>{F.current=w},[]),children:p.jsx(fe,{...j,children:p.jsx(Lt,{asChild:!0,trapped:o,onMountAutoFocus:y(i,w=>{w.preventDefault(),_.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:p.jsx(Ft,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:u,onPointerDownOutside:a,onFocusOutside:d,onInteractOutside:f,onDismiss:v,children:p.jsx(rn,{asChild:!0,...M,dir:b.dir,orientation:"vertical",loop:n,currentTabStopId:C,onCurrentTabStopIdChange:D,onEntryFocus:y(l,w=>{b.isUsingKeyboardRef.current||w.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(Gt,{role:"menu","aria-orientation":"vertical","data-state":pt(g.open),"data-radix-menu-content":"",dir:b.dir,...S,...E,ref:R,style:{outline:"none",...E.style},onKeyDown:y(E.onKeyDown,w=>{const W=w.target.closest("[data-radix-menu-content]")===w.currentTarget,V=w.ctrlKey||w.altKey||w.metaKey,me=w.key.length===1;W&&(w.key==="Tab"&&w.preventDefault(),!V&&me&&_t(w.key));const ve=_.current;if(w.target!==ve||!an.includes(w.key))return;w.preventDefault();const X=x().filter(A=>!A.disabled).map(A=>A.ref.current);ze.includes(w.key)&&X.reverse(),Dn(X)}),onBlur:y(r.onBlur,w=>{w.currentTarget.contains(w.target)||(window.clearTimeout(I.current),T.current="")}),onPointerMove:y(r.onPointerMove,J(w=>{const U=w.target,W=re.current!==w.clientX;if(w.currentTarget.contains(U)&&W){const V=w.clientX>re.current?"right":"left";ne.current=V,re.current=w.clientX}}))})})})})})})});Je.displayName=N;var yn="MenuGroup",_e=h.forwardRef((r,e)=>{const{__scopeMenu:t,...n}=r;return p.jsx(O.div,{role:"group",...n,ref:e})});_e.displayName=yn;var Cn="MenuLabel",Qe=h.forwardRef((r,e)=>{const{__scopeMenu:t,...n}=r;return p.jsx(O.div,{...n,ref:e})});Qe.displayName=Cn;var ie="MenuItem",Ae="menu.itemSelect",le=h.forwardRef((r,e)=>{const{disabled:t=!1,onSelect:n,...o}=r,i=h.useRef(null),s=ee(ie,r.__scopeMenu),c=Re(ie,r.__scopeMenu),l=G(e,i),u=h.useRef(!1),a=()=>{const d=i.current;if(!t&&d){const f=new CustomEvent(Ae,{bubbles:!0,cancelable:!0});d.addEventListener(Ae,v=>n?.(v),{once:!0}),At(d,f),f.defaultPrevented?u.current=!1:s.onClose()}};return p.jsx(Ze,{...o,ref:l,disabled:t,onClick:y(r.onClick,a),onPointerDown:d=>{r.onPointerDown?.(d),u.current=!0},onPointerUp:y(r.onPointerUp,d=>{u.current||d.currentTarget?.click()}),onKeyDown:y(r.onKeyDown,d=>{const f=c.searchRef.current!=="";t||f&&d.key===" "||Ce.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});le.displayName=ie;var Ze=h.forwardRef((r,e)=>{const{__scopeMenu:t,disabled:n=!1,textValue:o,...i}=r,s=Re(ie,t),c=Ve(t),l=h.useRef(null),u=G(e,l),[a,d]=h.useState(!1),[f,v]=h.useState("");return h.useEffect(()=>{const m=l.current;m&&v((m.textContent??"").trim())},[i.children]),p.jsx(q.ItemSlot,{scope:t,disabled:n,textValue:o??f,children:p.jsx(on,{asChild:!0,...c,focusable:!n,children:p.jsx(O.div,{role:"menuitem","data-highlighted":a?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:y(r.onPointerMove,J(m=>{n?s.onItemLeave(m):(s.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:y(r.onPointerLeave,J(m=>s.onItemLeave(m))),onFocus:y(r.onFocus,()=>d(!0)),onBlur:y(r.onBlur,()=>d(!1))})})})}),xn="MenuCheckboxItem",et=h.forwardRef((r,e)=>{const{checked:t=!1,onCheckedChange:n,...o}=r;return p.jsx(it,{scope:r.__scopeMenu,checked:t,children:p.jsx(le,{role:"menuitemcheckbox","aria-checked":se(t)?"mixed":t,...o,ref:e,"data-state":Te(t),onSelect:y(o.onSelect,()=>n?.(se(t)?!0:!t),{checkForDefaultPrevented:!1})})})});et.displayName=xn;var tt="MenuRadioGroup",[Mn,Sn]=$(tt,{value:void 0,onValueChange:()=>{}}),nt=h.forwardRef((r,e)=>{const{value:t,onValueChange:n,...o}=r,i=Me(n);return p.jsx(Mn,{scope:r.__scopeMenu,value:t,onValueChange:i,children:p.jsx(_e,{...o,ref:e})})});nt.displayName=tt;var rt="MenuRadioItem",ot=h.forwardRef((r,e)=>{const{value:t,...n}=r,o=Sn(rt,r.__scopeMenu),i=t===o.value;return p.jsx(it,{scope:r.__scopeMenu,checked:i,children:p.jsx(le,{role:"menuitemradio","aria-checked":i,...n,ref:e,"data-state":Te(i),onSelect:y(n.onSelect,()=>o.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});ot.displayName=rt;var De="MenuItemIndicator",[it,En]=$(De,{checked:!1}),st=h.forwardRef((r,e)=>{const{__scopeMenu:t,forceMount:n,...o}=r,i=En(De,t);return p.jsx(ue,{present:n||se(i.checked)||i.checked===!0,children:p.jsx(O.span,{...o,ref:e,"data-state":Te(i.checked)})})});st.displayName=De;var Rn="MenuSeparator",at=h.forwardRef((r,e)=>{const{__scopeMenu:t,...n}=r;return p.jsx(O.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});at.displayName=Rn;var Pn="MenuArrow",ct=h.forwardRef((r,e)=>{const{__scopeMenu:t,...n}=r,o=de(t);return p.jsx(Wt,{...o,...n,ref:e})});ct.displayName=Pn;var _n="MenuSub",[Fr,ut]=$(_n),Y="MenuSubTrigger",dt=h.forwardRef((r,e)=>{const t=B(Y,r.__scopeMenu),n=ee(Y,r.__scopeMenu),o=ut(Y,r.__scopeMenu),i=Re(Y,r.__scopeMenu),s=h.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:l}=i,u={__scopeMenu:r.__scopeMenu},a=h.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return h.useEffect(()=>a,[a]),h.useEffect(()=>{const d=c.current;return()=>{window.clearTimeout(d),l(null)}},[c,l]),p.jsx(Se,{asChild:!0,...u,children:p.jsx(Ze,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":o.contentId,"data-state":pt(t.open),...r,ref:je(e,o.onTriggerChange),onClick:d=>{r.onClick?.(d),!(r.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:y(r.onPointerMove,J(d=>{i.onItemEnter(d),!d.defaultPrevented&&!r.disabled&&!t.open&&!s.current&&(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{t.onOpenChange(!0),a()},100))})),onPointerLeave:y(r.onPointerLeave,J(d=>{a();const f=t.content?.getBoundingClientRect();if(f){const v=t.content?.dataset.side,m=v==="right",E=m?-5:5,g=f[m?"left":"right"],b=f[m?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+E,y:d.clientY},{x:g,y:f.top},{x:b,y:f.top},{x:b,y:f.bottom},{x:g,y:f.bottom}],side:v}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:y(r.onKeyDown,d=>{const f=i.searchRef.current!=="";r.disabled||f&&d.key===" "||cn[n.dir].includes(d.key)&&(t.onOpenChange(!0),t.content?.focus(),d.preventDefault())})})})});dt.displayName=Y;var lt="MenuSubContent",ht=h.forwardRef((r,e)=>{const t=Ye(N,r.__scopeMenu),{forceMount:n=t.forceMount,...o}=r,i=B(N,r.__scopeMenu),s=ee(N,r.__scopeMenu),c=ut(lt,r.__scopeMenu),l=h.useRef(null),u=G(e,l);return p.jsx(q.Provider,{scope:r.__scopeMenu,children:p.jsx(ue,{present:n||i.open,children:p.jsx(q.Slot,{scope:r.__scopeMenu,children:p.jsx(Pe,{id:c.contentId,"aria-labelledby":c.triggerId,...o,ref:u,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:a=>{s.isUsingKeyboardRef.current&&l.current?.focus(),a.preventDefault()},onCloseAutoFocus:a=>a.preventDefault(),onFocusOutside:y(r.onFocusOutside,a=>{a.target!==c.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:y(r.onEscapeKeyDown,a=>{s.onClose(),a.preventDefault()}),onKeyDown:y(r.onKeyDown,a=>{const d=a.currentTarget.contains(a.target),f=un[s.dir].includes(a.key);d&&f&&(i.onOpenChange(!1),c.trigger?.focus(),a.preventDefault())})})})})})});ht.displayName=lt;function pt(r){return r?"open":"closed"}function se(r){return r==="indeterminate"}function Te(r){return se(r)?"indeterminate":r?"checked":"unchecked"}function Dn(r){const e=document.activeElement;for(const t of r)if(t===e||(t.focus(),document.activeElement!==e))return}function Tn(r,e){return r.map((t,n)=>r[(e+n)%r.length])}function kn(r,e,t){const o=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=t?r.indexOf(t):-1;let s=Tn(r,Math.max(i,0));o.length===1&&(s=s.filter(u=>u!==t));const l=s.find(u=>u.toLowerCase().startsWith(o.toLowerCase()));return l!==t?l:void 0}function In(r,e){const{x:t,y:n}=r;let o=!1;for(let i=0,s=e.length-1;i<e.length;s=i++){const c=e[i],l=e[s],u=c.x,a=c.y,d=l.x,f=l.y;a>n!=f>n&&t<(d-u)*(n-a)/(f-a)+u&&(o=!o)}return o}function An(r,e){if(!e)return!1;const t={x:r.clientX,y:r.clientY};return In(t,e)}function J(r){return e=>e.pointerType==="mouse"?r(e):void 0}var Nn=Xe,On=Se,jn=qe,Ln=Je,Fn=_e,Gn=Qe,Wn=le,$n=et,Bn=nt,Kn=ot,Un=st,zn=at,Hn=ct,Vn=dt,Xn=ht,he="DropdownMenu",[Yn,Gr]=ce(he,[He]),k=He(),[qn,ft]=Yn(he),mt=r=>{const{__scopeDropdownMenu:e,children:t,dir:n,open:o,defaultOpen:i,onOpenChange:s,modal:c=!0}=r,l=k(e),u=h.useRef(null),[a,d]=xe({prop:o,defaultProp:i??!1,onChange:s,caller:he});return p.jsx(qn,{scope:e,triggerId:we(),triggerRef:u,contentId:we(),open:a,onOpenChange:d,onOpenToggle:h.useCallback(()=>d(f=>!f),[d]),modal:c,children:p.jsx(Nn,{...l,open:a,onOpenChange:d,dir:n,modal:c,children:t})})};mt.displayName=he;var vt="DropdownMenuTrigger",gt=h.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,disabled:n=!1,...o}=r,i=ft(vt,t),s=k(t);return p.jsx(On,{asChild:!0,...s,children:p.jsx(O.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...o,ref:je(e,i.triggerRef),onPointerDown:y(r.onPointerDown,c=>{!n&&c.button===0&&c.ctrlKey===!1&&(i.onOpenToggle(),i.open||c.preventDefault())}),onKeyDown:y(r.onKeyDown,c=>{n||(["Enter"," "].includes(c.key)&&i.onOpenToggle(),c.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});gt.displayName=vt;var Jn="DropdownMenuPortal",bt=r=>{const{__scopeDropdownMenu:e,...t}=r,n=k(e);return p.jsx(jn,{...n,...t})};bt.displayName=Jn;var wt="DropdownMenuContent",yt=h.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,o=ft(wt,t),i=k(t),s=h.useRef(!1);return p.jsx(Ln,{id:o.contentId,"aria-labelledby":o.triggerId,...i,...n,ref:e,onCloseAutoFocus:y(r.onCloseAutoFocus,c=>{s.current||o.triggerRef.current?.focus(),s.current=!1,c.preventDefault()}),onInteractOutside:y(r.onInteractOutside,c=>{const l=c.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,a=l.button===2||u;(!o.modal||a)&&(s.current=!0)}),style:{...r.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});yt.displayName=wt;var Qn="DropdownMenuGroup",Zn=h.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,o=k(t);return p.jsx(Fn,{...o,...n,ref:e})});Zn.displayName=Qn;var er="DropdownMenuLabel",tr=h.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,o=k(t);return p.jsx(Gn,{...o,...n,ref:e})});tr.displayName=er;var nr="DropdownMenuItem",Ct=h.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,o=k(t);return p.jsx(Wn,{...o,...n,ref:e})});Ct.displayName=nr;var rr="DropdownMenuCheckboxItem",or=h.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,o=k(t);return p.jsx($n,{...o,...n,ref:e})});or.displayName=rr;var ir="DropdownMenuRadioGroup",sr=h.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,o=k(t);return p.jsx(Bn,{...o,...n,ref:e})});sr.displayName=ir;var ar="DropdownMenuRadioItem",cr=h.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,o=k(t);return p.jsx(Kn,{...o,...n,ref:e})});cr.displayName=ar;var ur="DropdownMenuItemIndicator",dr=h.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,o=k(t);return p.jsx(Un,{...o,...n,ref:e})});dr.displayName=ur;var lr="DropdownMenuSeparator",hr=h.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,o=k(t);return p.jsx(zn,{...o,...n,ref:e})});hr.displayName=lr;var pr="DropdownMenuArrow",fr=h.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,o=k(t);return p.jsx(Hn,{...o,...n,ref:e})});fr.displayName=pr;var mr="DropdownMenuSubTrigger",vr=h.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,o=k(t);return p.jsx(Vn,{...o,...n,ref:e})});vr.displayName=mr;var gr="DropdownMenuSubContent",br=h.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,o=k(t);return p.jsx(Xn,{...o,...n,ref:e,style:{...r.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});br.displayName=gr;var wr=mt,yr=gt,Cr=bt,xr=yt,Mr=Ct;function Wr({...r}){return p.jsx(wr,{"data-slot":"dropdown-menu",...r})}function $r({...r}){return p.jsx(yr,{"data-slot":"dropdown-menu-trigger",...r})}function Br({className:r,sideOffset:e=4,...t}){return p.jsx(Cr,{children:p.jsx(xr,{"data-slot":"dropdown-menu-content",sideOffset:e,className:z("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",r),...t})})}function Kr({className:r,inset:e,variant:t="default",...n}){return p.jsx(Mr,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":t,className:z("hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-100 focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:hover:bg-destructive/10 dark:data-[variant=destructive]:hover:bg-destructive/20 data-[variant=destructive]:hover:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-pointer items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),...n})}function P(r,e,t,n){return new(t||(t=Promise))((function(o,i){function s(u){try{l(n.next(u))}catch(a){i(a)}}function c(u){try{l(n.throw(u))}catch(a){i(a)}}function l(u){var a;u.done?o(u.value):(a=u.value,a instanceof t?a:new t((function(d){d(a)}))).then(s,c)}l((n=n.apply(r,e||[])).next())}))}class te{constructor(){this.listeners={}}on(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),n?.once){const o=()=>{this.un(e,o),this.un(e,t)};return this.on(e,o),o}return()=>this.un(e,t)}un(e,t){var n;(n=this.listeners[e])===null||n===void 0||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach((n=>n(...t)))}}const oe={decode:function(r,e){return P(this,void 0,void 0,(function*(){const t=new AudioContext({sampleRate:e});return t.decodeAudioData(r).finally((()=>t.close()))}))},createBuffer:function(r,e){return typeof r[0]=="number"&&(r=[r]),(function(t){const n=t[0];if(n.some((o=>o>1||o<-1))){const o=n.length;let i=0;for(let s=0;s<o;s++){const c=Math.abs(n[s]);c>i&&(i=c)}for(const s of t)for(let c=0;c<o;c++)s[c]/=i}})(r),{duration:e,length:r[0].length,sampleRate:r[0].length/e,numberOfChannels:r.length,getChannelData:t=>r?.[t],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function xt(r,e){const t=e.xmlns?document.createElementNS(e.xmlns,r):document.createElement(r);for(const[n,o]of Object.entries(e))if(n==="children"&&o)for(const[i,s]of Object.entries(o))s instanceof Node?t.appendChild(s):typeof s=="string"?t.appendChild(document.createTextNode(s)):t.appendChild(xt(i,s));else n==="style"?Object.assign(t.style,o):n==="textContent"?t.textContent=o:t.setAttribute(n,o.toString());return t}function Ne(r,e,t){const n=xt(r,e||{});return t?.appendChild(n),n}var Sr=Object.freeze({__proto__:null,createElement:Ne,default:Ne});const Er={fetchBlob:function(r,e,t){return P(this,void 0,void 0,(function*(){const n=yield fetch(r,t);if(n.status>=400)throw new Error(`Failed to fetch ${r}: ${n.status} (${n.statusText})`);return(function(o,i){P(this,void 0,void 0,(function*(){if(!o.body||!o.headers)return;const s=o.body.getReader(),c=Number(o.headers.get("Content-Length"))||0;let l=0;const u=d=>P(this,void 0,void 0,(function*(){l+=d?.length||0;const f=Math.round(l/c*100);i(f)})),a=()=>P(this,void 0,void 0,(function*(){let d;try{d=yield s.read()}catch{return}d.done||(u(d.value),yield a())}));a()}))})(n.clone(),e),n.blob()}))}};class Rr extends te{constructor(e){super(),this.isExternalMedia=!1,e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),e.playbackRate!=null&&this.onMediaEvent("canplay",(()=>{e.playbackRate!=null&&(this.media.playbackRate=e.playbackRate)}),{once:!0})}onMediaEvent(e,t,n){return this.media.addEventListener(e,t,n),()=>this.media.removeEventListener(e,t,n)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}canPlayType(e){return this.media.canPlayType(e)!==""}setSrc(e,t){const n=this.getSrc();if(e&&n===e)return;this.revokeSrc();const o=t instanceof Blob&&(this.canPlayType(t.type)||!e)?URL.createObjectURL(t):e;if(n&&this.media.removeAttribute("src"),o||e)try{this.media.src=o}catch{this.media.src=e}}destroy(){this.isExternalMedia||(this.media.pause(),this.media.remove(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load())}setMediaElement(e){this.media=e}play(){return P(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(e){if(e instanceof DOMException&&e.name==="AbortError")return;throw e}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=Math.max(0,Math.min(e,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(e,t){t!=null&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}}class H extends te{constructor(e,t){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=e;const n=this.parentFromOptionsContainer(e.container);this.parent=n;const[o,i]=this.initHtml();n.appendChild(o),this.container=o,this.scrollContainer=i.querySelector(".scroll"),this.wrapper=i.querySelector(".wrapper"),this.canvasWrapper=i.querySelector(".canvases"),this.progressWrapper=i.querySelector(".progress"),this.cursor=i.querySelector(".cursor"),t&&i.appendChild(t),this.initEvents()}parentFromOptionsContainer(e){let t;if(typeof e=="string"?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw new Error("Container not found");return t}initEvents(){const e=t=>{const n=this.wrapper.getBoundingClientRect(),o=t.clientX-n.left,i=t.clientY-n.top;return[o/n.width,i/n.height]};if(this.wrapper.addEventListener("click",(t=>{const[n,o]=e(t);this.emit("click",n,o)})),this.wrapper.addEventListener("dblclick",(t=>{const[n,o]=e(t);this.emit("dblclick",n,o)})),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",(()=>{const{scrollLeft:t,scrollWidth:n,clientWidth:o}=this.scrollContainer,i=t/n,s=(t+o)/n;this.emit("scroll",i,s,t,t+o)})),typeof ResizeObserver=="function"){const t=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{t().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const e=this.parent.clientWidth;e===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=e,this.reRender())}initDrag(){this.subscriptions.push((function(e,t,n,o,i=3,s=0,c=100){if(!e)return()=>{};const l=matchMedia("(pointer: coarse)").matches;let u=()=>{};const a=d=>{if(d.button!==s)return;d.preventDefault(),d.stopPropagation();let f=d.clientX,v=d.clientY,m=!1;const E=Date.now(),g=C=>{if(C.preventDefault(),C.stopPropagation(),l&&Date.now()-E<c)return;const D=C.clientX,_=C.clientY,R=D-f,I=_-v;if(m||Math.abs(R)>i||Math.abs(I)>i){const T=e.getBoundingClientRect(),{left:L,top:F}=T;m||(n?.(f-L,v-F),m=!0),t(R,I,D-L,_-F),f=D,v=_}},b=C=>{if(m){const D=C.clientX,_=C.clientY,R=e.getBoundingClientRect(),{left:I,top:T}=R;o?.(D-I,_-T)}u()},S=C=>{C.relatedTarget&&C.relatedTarget!==document.documentElement||b(C)},M=C=>{m&&(C.stopPropagation(),C.preventDefault())},x=C=>{m&&C.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",b),document.addEventListener("pointerout",S),document.addEventListener("pointercancel",S),document.addEventListener("touchmove",x,{passive:!1}),document.addEventListener("click",M,{capture:!0}),u=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",b),document.removeEventListener("pointerout",S),document.removeEventListener("pointercancel",S),document.removeEventListener("touchmove",x),setTimeout((()=>{document.removeEventListener("click",M,{capture:!0})}),10)}};return e.addEventListener("pointerdown",a),()=>{u(),e.removeEventListener("pointerdown",a)}})(this.wrapper,((e,t,n)=>{this.emit("drag",Math.max(0,Math.min(1,n/this.wrapper.getBoundingClientRect().width)))}),(e=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,e/this.wrapper.getBoundingClientRect().width)))}),(e=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,e/this.wrapper.getBoundingClientRect().width)))})))}getHeight(e,t){var n;const o=((n=this.audioData)===null||n===void 0?void 0:n.numberOfChannels)||1;if(e==null)return 128;if(!isNaN(Number(e)))return Number(e);if(e==="auto"){const i=this.parent.clientHeight||128;return t?.every((s=>!s.overlay))?i/o:i}return 128}initHtml(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),n=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return t.innerHTML=`
      <style${n?` nonce="${n}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[e,t]}setOptions(e){if(this.options.container!==e.container){const t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}e.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(e){this.scrollContainer.scrollLeft=e}setScrollPercentage(e){const{scrollWidth:t}=this.scrollContainer,n=t*e;this.setScroll(n)}destroy(){var e,t;this.subscriptions.forEach((n=>n())),this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.unsubscribeOnScroll)===null||t===void 0||t.forEach((n=>n())),this.unsubscribeOnScroll=[]}createDelay(e=10){let t,n;const o=()=>{t&&clearTimeout(t),n&&n()};return this.timeouts.push(o),()=>new Promise(((i,s)=>{o(),n=s,t=setTimeout((()=>{t=void 0,n=void 0,i()}),e)}))}convertColorValues(e){if(!Array.isArray(e))return e||"";if(e.length<2)return e[0]||"";const t=document.createElement("canvas"),n=t.getContext("2d"),o=t.height*(window.devicePixelRatio||1),i=n.createLinearGradient(0,0,0,o),s=1/(e.length-1);return e.forEach(((c,l)=>{const u=l*s;i.addColorStop(u,c)})),i}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(e,t,n,o){const i=e[0],s=e[1]||e[0],c=i.length,{width:l,height:u}=n.canvas,a=u/2,d=this.getPixelRatio(),f=t.barWidth?t.barWidth*d:1,v=t.barGap?t.barGap*d:t.barWidth?f/2:0,m=t.barRadius||0,E=l/(f+v)/c,g=m&&"roundRect"in n?"roundRect":"rect";n.beginPath();let b=0,S=0,M=0;for(let x=0;x<=c;x++){const C=Math.round(x*E);if(C>b){const R=Math.round(S*a*o),I=R+Math.round(M*a*o)||1;let T=a-R;t.barAlign==="top"?T=0:t.barAlign==="bottom"&&(T=u-I),n[g](b*(f+v),T,f,I,m),b=C,S=0,M=0}const D=Math.abs(i[x]||0),_=Math.abs(s[x]||0);D>S&&(S=D),_>M&&(M=_)}n.fill(),n.closePath()}renderLineWaveform(e,t,n,o){const i=s=>{const c=e[s]||e[0],l=c.length,{height:u}=n.canvas,a=u/2,d=n.canvas.width/l;n.moveTo(0,a);let f=0,v=0;for(let m=0;m<=l;m++){const E=Math.round(m*d);if(E>f){const b=a+(Math.round(v*a*o)||1)*(s===0?-1:1);n.lineTo(f,b),f=E,v=0}const g=Math.abs(c[m]||0);g>v&&(v=g)}n.lineTo(f,a)};n.beginPath(),i(0),i(1),n.fill(),n.closePath()}renderWaveform(e,t,n){if(n.fillStyle=this.convertColorValues(t.waveColor),t.renderFunction)return void t.renderFunction(e,n);let o=t.barHeight||1;if(t.normalize){const i=Array.from(e[0]).reduce(((s,c)=>Math.max(s,Math.abs(c))),0);o=i?1/i:1}t.barWidth||t.barGap||t.barAlign?this.renderBarWaveform(e,t,n,o):this.renderLineWaveform(e,t,n,o)}renderSingleCanvas(e,t,n,o,i,s,c){const l=this.getPixelRatio(),u=document.createElement("canvas");u.width=Math.round(n*l),u.height=Math.round(o*l),u.style.width=`${n}px`,u.style.height=`${o}px`,u.style.left=`${Math.round(i)}px`,s.appendChild(u);const a=u.getContext("2d");if(this.renderWaveform(e,t,a),u.width>0&&u.height>0){const d=u.cloneNode(),f=d.getContext("2d");f.drawImage(u,0,0),f.globalCompositeOperation="source-in",f.fillStyle=this.convertColorValues(t.progressColor),f.fillRect(0,0,u.width,u.height),c.appendChild(d)}}renderMultiCanvas(e,t,n,o,i,s){const c=this.getPixelRatio(),{clientWidth:l}=this.scrollContainer,u=n/c;let a=Math.min(H.MAX_CANVAS_WIDTH,l,u),d={};if(t.barWidth||t.barGap){const g=t.barWidth||.5,b=g+(t.barGap||g/2);a%b!=0&&(a=Math.floor(a/b)*b)}if(a===0)return;const f=g=>{if(g<0||g>=v||d[g])return;d[g]=!0;const b=g*a;let S=Math.min(u-b,a);if(t.barWidth||t.barGap){const x=t.barWidth||.5,C=x+(t.barGap||x/2);S=Math.floor(S/C)*C}if(S<=0)return;const M=e.map((x=>{const C=Math.floor(b/u*x.length),D=Math.floor((b+S)/u*x.length);return x.slice(C,D)}));this.renderSingleCanvas(M,t,S,o,b,i,s)},v=Math.ceil(u/a);if(!this.isScrollable){for(let g=0;g<v;g++)f(g);return}const m=this.scrollContainer.scrollLeft/u,E=Math.floor(m*v);if(f(E-1),f(E),f(E+1),v>1){const g=this.on("scroll",(()=>{const{scrollLeft:b}=this.scrollContainer,S=Math.floor(b/u*v);Object.keys(d).length>H.MAX_NODES&&(i.innerHTML="",s.innerHTML="",d={}),f(S-1),f(S),f(S+1)}));this.unsubscribeOnScroll.push(g)}}renderChannel(e,t,n,o){var{overlay:i}=t,s=(function(a,d){var f={};for(var v in a)Object.prototype.hasOwnProperty.call(a,v)&&d.indexOf(v)<0&&(f[v]=a[v]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var m=0;for(v=Object.getOwnPropertySymbols(a);m<v.length;m++)d.indexOf(v[m])<0&&Object.prototype.propertyIsEnumerable.call(a,v[m])&&(f[v[m]]=a[v[m]])}return f})(t,["overlay"]);const c=document.createElement("div"),l=this.getHeight(s.height,s.splitChannels);c.style.height=`${l}px`,i&&o>0&&(c.style.marginTop=`-${l}px`),this.canvasWrapper.style.minHeight=`${l}px`,this.canvasWrapper.appendChild(c);const u=c.cloneNode();this.progressWrapper.appendChild(u),this.renderMultiCanvas(e,s,n,l,c,u)}render(e){return P(this,void 0,void 0,(function*(){var t;this.timeouts.forEach((l=>l())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const n=this.getPixelRatio(),o=this.scrollContainer.clientWidth,i=Math.ceil(e.duration*(this.options.minPxPerSec||0));this.isScrollable=i>o;const s=this.options.fillParent&&!this.isScrollable,c=(s?o:i)*n;if(this.wrapper.style.width=s?"100%":`${i}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit("render"),this.options.splitChannels)for(let l=0;l<e.numberOfChannels;l++){const u=Object.assign(Object.assign({},this.options),(t=this.options.splitChannels)===null||t===void 0?void 0:t[l]);this.renderChannel([e.getChannelData(l)],u,c,l)}else{const l=[e.getChannelData(0)];e.numberOfChannels>1&&l.push(e.getChannelData(1)),this.renderChannel(l,this.options,c,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((n=>n())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:e}=this.scrollContainer,{right:t}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&e!==this.scrollContainer.scrollWidth){const{right:n}=this.progressWrapper.getBoundingClientRect();let o=n-t;o*=2,o=o<0?Math.floor(o):Math.ceil(o),o/=2,this.scrollContainer.scrollLeft+=o}}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,t=!1){const{scrollLeft:n,scrollWidth:o,clientWidth:i}=this.scrollContainer,s=e*o,c=n,l=n+i,u=i/2;if(this.isDragging)s+30>l?this.scrollContainer.scrollLeft+=30:s-30<c&&(this.scrollContainer.scrollLeft-=30);else{(s<c||s>l)&&(this.scrollContainer.scrollLeft=s-(this.options.autoCenter?u:0));const a=s-n-u;t&&this.options.autoCenter&&a>0&&(this.scrollContainer.scrollLeft+=Math.min(a,10))}{const a=this.scrollContainer.scrollLeft,d=a/o,f=(a+i)/o;this.emit("scroll",d,f,a,a+i)}}renderProgress(e,t){if(isNaN(e))return;const n=100*e;this.canvasWrapper.style.clipPath=`polygon(${n}% 0%, 100% 0%, 100% 100%, ${n}% 100%)`,this.progressWrapper.style.width=`${n}%`,this.cursor.style.left=`${n}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${e*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(e,t)}exportImage(e,t,n){return P(this,void 0,void 0,(function*(){const o=this.canvasWrapper.querySelectorAll("canvas");if(!o.length)throw new Error("No waveform data");if(n==="dataURL"){const i=Array.from(o).map((s=>s.toDataURL(e,t)));return Promise.resolve(i)}return Promise.all(Array.from(o).map((i=>new Promise(((s,c)=>{i.toBlob((l=>{l?s(l):c(new Error("Could not export image"))}),e,t)})))))}))}}H.MAX_CANVAS_WIDTH=8e3,H.MAX_NODES=10;class Pr extends te{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",(()=>{requestAnimationFrame((()=>{this.emit("tick")}))})),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class be extends te{constructor(e=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return P(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(e){if(this.currentSrc=e,this._duration=void 0,!e)return this.buffer=null,void this.emit("emptied");fetch(e).then((t=>{if(t.status>=400)throw new Error(`Failed to fetch ${e}: ${t.status} (${t.statusText})`);return t.arrayBuffer()})).then((t=>this.currentSrc!==e?null:this.audioContext.decodeAudioData(t))).then((t=>{this.currentSrc===e&&(this.buffer=t,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())}))}_play(){var e;if(!this.paused)return;this.paused=!1,(e=this.bufferNode)===null||e===void 0||e.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let t=this.playedDuration*this._playbackRate;(t>=this.duration||t<0)&&(t=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,t),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var e;this.paused=!0,(e=this.bufferNode)===null||e===void 0||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return P(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(e){const t=e-this.currentTime,n=this.bufferNode;n?.stop(this.audioContext.currentTime+t),n?.addEventListener("ended",(()=>{n===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(e){return P(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(e)}))}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(e){const t=!this.paused;t&&this._pause(),this.playedDuration=e/this._playbackRate,t&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var e,t;return(e=this._duration)!==null&&e!==void 0?e:((t=this.buffer)===null||t===void 0?void 0:t.duration)||0}set duration(e){this._duration=e}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit("volumechange")}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(e){return/^(audio|video)\//.test(e)}getGainNode(){return this.gainNode}getChannelData(){const e=[];if(!this.buffer)return e;const t=this.buffer.numberOfChannels;for(let n=0;n<t;n++)e.push(this.buffer.getChannelData(n));return e}removeAttribute(e){switch(e){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}}const _r={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class ae extends Rr{static create(e){return new ae(e)}constructor(e){const t=e.media||(e.backend==="WebAudio"?new be:void 0);super({media:t,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},_r,e),this.timer=new Pr;const n=t?void 0:this.getMediaElement();this.renderer=new H(this.options,n),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const o=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:i,duration:s}=this.options;(o||i&&s)&&this.load(o,i,s).catch((()=>null))}))}updateProgress(e=this.getCurrentTime()){return this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),e}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const e=this.updateProgress();this.emit("timeupdate",e),this.emit("audioprocess",e),this.stopAtPosition!=null&&this.isPlaying()&&e>=this.stopAtPosition&&this.pause()}})))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const e=this.updateProgress();this.emit("timeupdate",e)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("emptied",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("ended",(()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(()=>{var e;this.emit("error",(e=this.getMediaElement().error)!==null&&e!==void 0?e:new Error("Media error")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((e,t)=>{this.options.interact&&(this.seekTo(e),this.emit("interaction",e*this.getDuration()),this.emit("click",e,t))})),this.renderer.on("dblclick",((e,t)=>{this.emit("dblclick",e,t)})),this.renderer.on("scroll",((e,t,n,o)=>{const i=this.getDuration();this.emit("scroll",e*i,t*i,n,o)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(e=>{this.emit("dragstart",e)})),this.renderer.on("dragend",(e=>{this.emit("dragend",e)})));{let e;this.subscriptions.push(this.renderer.on("drag",(t=>{if(!this.options.interact)return;let n;this.renderer.renderProgress(t),clearTimeout(e),this.isPlaying()?n=0:this.options.dragToSeek===!0?n=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(n=this.options.dragToSeek.debounceTime),e=setTimeout((()=>{this.seekTo(t)}),n),this.emit("interaction",t*this.getDuration()),this.emit("drag",t)})))}}initPlugins(){var e;!((e=this.options.plugins)===null||e===void 0)&&e.length&&this.options.plugins.forEach((t=>{this.registerPlugin(t)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((e=>e())),this.mediaSubscriptions=[]}setOptions(e){this.options=Object.assign({},this.options,e),e.duration&&!e.peaks&&(this.decodedData=oe.createBuffer(this.exportPeaks(),e.duration)),e.peaks&&e.duration&&(this.decodedData=oe.createBuffer(e.peaks,e.duration)),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),e.mediaControls!=null&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){if(this.plugins.includes(e))return e;e._init(this),this.plugins.push(e);const t=e.once("destroy",(()=>{this.plugins=this.plugins.filter((n=>n!==e)),this.subscriptions=this.subscriptions.filter((n=>n!==t))}));return this.subscriptions.push(t),e}unregisterPlugin(e){this.plugins=this.plugins.filter((t=>t!==e)),e.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(e){return this.renderer.setScroll(e)}setScrollTime(e){const t=e/this.getDuration();this.renderer.setScrollPercentage(t)}getActivePlugins(){return this.plugins}loadAudio(e,t,n,o){return P(this,void 0,void 0,(function*(){var i;if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,!t&&!n){const c=this.options.fetchParams||{};window.AbortController&&!c.signal&&(this.abortController=new AbortController,c.signal=(i=this.abortController)===null||i===void 0?void 0:i.signal);const l=a=>this.emit("loading",a);t=yield Er.fetchBlob(e,l,c);const u=this.options.blobMimeType;u&&(t=new Blob([t],{type:u}))}this.setSrc(e,t);const s=yield new Promise((c=>{const l=o||this.getDuration();l?c(l):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>c(this.getDuration())),{once:!0}))}));if(!e&&!t){const c=this.getMediaElement();c instanceof be&&(c.duration=s)}if(n)this.decodedData=oe.createBuffer(n,s||0);else if(t){const c=yield t.arrayBuffer();this.decodedData=yield oe.decode(c,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(e,t,n){return P(this,void 0,void 0,(function*(){try{return yield this.loadAudio(e,void 0,t,n)}catch(o){throw this.emit("error",o),o}}))}loadBlob(e,t,n){return P(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",e,t,n)}catch(o){throw this.emit("error",o),o}}))}zoom(e){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:t=8e3,precision:n=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const o=Math.min(e,this.decodedData.numberOfChannels),i=[];for(let s=0;s<o;s++){const c=this.decodedData.getChannelData(s),l=[],u=c.length/t;for(let a=0;a<t;a++){const d=c.slice(Math.floor(a*u),Math.ceil((a+1)*u));let f=0;for(let v=0;v<d.length;v++){const m=d[v];Math.abs(m)>Math.abs(f)&&(f=m)}l.push(Math.round(f*n)/n)}i.push(l)}return i}getDuration(){let e=super.getDuration()||0;return e!==0&&e!==1/0||!this.decodedData||(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}setTime(e){this.stopAtPosition=null,super.setTime(e),this.updateProgress(e),this.emit("timeupdate",e)}seekTo(e){const t=this.getDuration()*e;this.setTime(t)}play(e,t){const n=Object.create(null,{play:{get:()=>super.play}});return P(this,void 0,void 0,(function*(){e!=null&&this.setTime(e);const o=yield n.play.call(this);return t!=null&&(this.media instanceof be?this.media.stopAt(t):this.stopAtPosition=t),o}))}playPause(){return P(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load("",[[0]],.001)}setMediaElement(e){this.unsubscribePlayerEvents(),super.setMediaElement(e),this.initPlayerEvents()}exportImage(){return P(this,arguments,void 0,(function*(e="image/png",t=1,n="dataURL"){return this.renderer.exportImage(e,t,n)}))}destroy(){var e;this.emit("destroy"),(e=this.abortController)===null||e===void 0||e.abort(),this.plugins.forEach((t=>t.destroy())),this.subscriptions.forEach((t=>t())),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}ae.BasePlugin=class extends te{constructor(r){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=r}onInit(){}_init(r){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=r,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((r=>r())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},ae.dom=Sr;function Ur({...r}){return p.jsx($t,{"data-slot":"popover",...r})}function zr({...r}){return p.jsx(Bt,{"data-slot":"popover-trigger",...r})}function Hr({className:r,align:e="center",sideOffset:t=4,...n}){return p.jsx(Kt,{children:p.jsx(Ut,{"data-slot":"popover-content",align:e,sideOffset:t,className:z("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",r),...n})})}var pe="Switch",[Dr,Vr]=ce(pe),[Tr,kr]=Dr(pe),Mt=h.forwardRef((r,e)=>{const{__scopeSwitch:t,name:n,checked:o,defaultChecked:i,required:s,disabled:c,value:l="on",onCheckedChange:u,form:a,...d}=r,[f,v]=h.useState(null),m=G(e,M=>v(M)),E=h.useRef(!1),g=f?a||!!f.closest("form"):!0,[b,S]=xe({prop:o,defaultProp:i??!1,onChange:u,caller:pe});return p.jsxs(Tr,{scope:t,checked:b,disabled:c,children:[p.jsx(O.button,{type:"button",role:"switch","aria-checked":b,"aria-required":s,"data-state":Pt(b),"data-disabled":c?"":void 0,disabled:c,value:l,...d,ref:m,onClick:y(r.onClick,M=>{S(x=>!x),g&&(E.current=M.isPropagationStopped(),E.current||M.stopPropagation())})}),g&&p.jsx(Rt,{control:f,bubbles:!E.current,name:n,value:l,checked:b,required:s,disabled:c,form:a,style:{transform:"translateX(-100%)"}})]})});Mt.displayName=pe;var St="SwitchThumb",Et=h.forwardRef((r,e)=>{const{__scopeSwitch:t,...n}=r,o=kr(St,t);return p.jsx(O.span,{"data-state":Pt(o.checked),"data-disabled":o.disabled?"":void 0,...n,ref:e})});Et.displayName=St;var Ir="SwitchBubbleInput",Rt=h.forwardRef(({__scopeSwitch:r,control:e,checked:t,bubbles:n=!0,...o},i)=>{const s=h.useRef(null),c=G(s,i),l=Ht(t),u=zt(e);return h.useEffect(()=>{const a=s.current;if(!a)return;const d=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==t&&v){const m=new Event("click",{bubbles:n});v.call(a,t),a.dispatchEvent(m)}},[l,t,n]),p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...o,tabIndex:-1,ref:c,style:{...o.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Rt.displayName=Ir;function Pt(r){return r?"checked":"unchecked"}var Ar=Mt,Nr=Et;function Xr({className:r,...e}){return p.jsx(Ar,{"data-slot":"switch",className:z("peer data-[state=checked]:bg-blue-500 data-[state=unchecked]:bg-gray-300 focus-visible:border-blue-500 focus-visible:ring-blue-500/50 dark:data-[state=unchecked]:bg-gray-600 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer",r),...e,children:p.jsx(Nr,{"data-slot":"switch-thumb",className:z("bg-white dark:data-[state=unchecked]:bg-gray-200 dark:data-[state=checked]:bg-white pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function Yr({className:r,...e}){return p.jsx("textarea",{"data-slot":"textarea",className:z("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),...e})}export{Wr as D,on as I,Ur as P,rn as R,Xr as S,Yr as T,zr as a,Hr as b,$r as c,Br as d,Kr as e,We as f,ae as u};
