import{j as e,r as s,c as va,P as ea}from"./ui-vendor-rA8IexKS.js";import{T as ka,A as Ue,a as Re,b as Ve,c as He,d as Je,e as Ge,f as qe,g as We,h as Be,i as Ke,p as Na,j as wa,H as Sa,v as Ca,k as Da}from"./TranscriptionConfigDialog-B7WsbJmu.js";import{P as Ta,a as Pa,b as Fa}from"./textarea-Bups9Y6L.js";import{c as O,u as Ae,L as Pe,B as N,a as Aa,T as ae,b as se,d as te,I as aa}from"./index-hSqt8rb2.js";import{D as sa,a as ta,b as ra,c as ia,d as la,e as na}from"./index-DHJEQtTr.js";import{S as Ia,a as _a,b as $a,c as La,d as Ma}from"./select-CtZYfv8r.js";import{L as re,b as za,H as Oa,c as Ea,d as oa,e as Se,f as Ce,g as De,h as Ua,i as Ra,j as Va,T as Ha,k as Ja,l as Ga,m as qa,n as Wa,o as Ba,p as de,U as ca,F as da,V as Ka,q as Xa,r as Qa,X as Fe}from"./lucide-vendor-DI6dXaZX.js";import{u as Za,f as Xe,g as Ya,a as es}from"./table-vendor-Cljvne1z.js";import"./react-vendor-gH-7aFTg.js";function as({className:r,...o}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:O("w-full caption-bottom text-sm",r),...o})})}function ss({className:r,...o}){return e.jsx("thead",{"data-slot":"table-header",className:O("[&_tr]:border-b",r),...o})}function ts({className:r,...o}){return e.jsx("tbody",{"data-slot":"table-body",className:O("[&_tr:last-child]:border-0",r),...o})}function Te({className:r,...o}){return e.jsx("tr",{"data-slot":"table-row",className:O("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",r),...o})}function rs({className:r,...o}){return e.jsx("th",{"data-slot":"table-head",className:O("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...o})}function Qe({className:r,...o}){return e.jsx("td",{"data-slot":"table-cell",className:O("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...o})}function is({open:r,onOpenChange:o,onStartTranscription:m,loading:h=!1}){const{getAuthHeaders:i}=Ae(),[u,j]=s.useState([]),[p,f]=s.useState(""),[w,$]=s.useState(!1),[g,F]=s.useState(null);s.useEffect(()=>{r&&q()},[r]);const q=async()=>{try{$(!0);const n=await fetch("/api/v1/profiles",{headers:{...i()}});if(n.ok){const S=await n.json();j(S);const z=await fetch("/api/v1/user/default-profile",{headers:{...i()}});if(z.ok){const E=await z.json();F(E),f(E.id)}else z.status===404&&(F(null),S.length>0&&f(S[0].id))}else console.error("Failed to fetch profiles")}catch(n){console.error("Error fetching profiles:",n)}finally{$(!1)}},L=()=>{if(!p)return;const n=u.find(S=>S.id===p);n&&m(n.parameters,n.id)},M=n=>{f(n)},J=()=>{const n=u.find(S=>S.id===p);return n&&g&&n.id===g.id?`${n.name} (Default)`:n?.name||""};return e.jsx(sa,{open:r,onOpenChange:o,children:e.jsxs(ta,{className:"sm:max-w-md bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[e.jsxs(ra,{children:[e.jsx(ia,{className:"text-gray-900 dark:text-gray-100",children:"Transcribe with Profile"}),e.jsx(la,{className:"text-gray-600 dark:text-gray-400",children:"Choose a saved profile to start transcription with your preferred settings."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Pe,{htmlFor:"profile",className:"text-gray-700 dark:text-gray-300 font-medium",children:"Select Profile"}),w?e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700",children:[e.jsx(re,{className:"h-4 w-4 animate-spin text-gray-500 dark:text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading profiles..."})]}):u.length===0?e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700",children:e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"No profiles available"})}):e.jsxs(Ia,{value:p,onValueChange:M,children:[e.jsx(_a,{className:"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400",children:e.jsx($a,{placeholder:"Choose a profile..."})}),e.jsx(La,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 max-h-60",children:u.map(n=>e.jsx(Ma,{value:n.id,className:"text-gray-900 dark:text-gray-100 focus:bg-gray-100 dark:focus:bg-gray-700",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:n.name}),g&&n.id===g.id&&e.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/30 px-1.5 py-0.5 rounded",children:"Default"})]}),n.description&&e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:n.description})]})},n.id))})]})]}),p&&!w&&e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Selected: "}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:J()})]}),(()=>{const n=u.find(S=>S.id===p);return n?.description?e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:n.description}):null})()]})]}),e.jsxs(na,{className:"gap-2",children:[e.jsx(N,{variant:"outline",onClick:()=>o(!1),className:"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx(N,{onClick:L,disabled:h||!p||w||u.length===0,className:"bg-blue-600 dark:bg-blue-700 hover:bg-blue-700 dark:hover:bg-blue-800 text-white min-w-[120px]",children:h?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"mr-2 h-4 w-4 animate-spin"}),"Starting..."]}):"Start Transcription"})]})]})})}const ls=({className:r})=>e.jsxs("svg",{className:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M12 2L15.09 8.26L22 9L17 14L18.18 21L12 17.77L5.82 21L7 14L2 9L8.91 8.26L12 2Z"}),e.jsx("path",{d:"M8 12h8",strokeWidth:"1.5"}),e.jsx("path",{d:"M8 16h6",strokeWidth:"1.5"})]}),ns=({className:r})=>e.jsxs("svg",{className:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M12 1v6m0 6v6"}),e.jsx("path",{d:"m21 12-6 0m-6 0-6 0"}),e.jsx("path",{d:"m16.24 7.76-4.24 4.24m-4.24 4.24-1.41-1.41"}),e.jsx("path",{d:"M16.24 16.24 12 12m-4.24-4.24L6.34 6.34"})]});function os({value:r,onChange:o,placeholder:m,className:h}){const[i,u]=s.useState(r);return s.useEffect(()=>{u(r)},[r]),s.useEffect(()=>{const j=setTimeout(()=>{o(i)},300);return()=>clearTimeout(j)},[i,o]),e.jsx(aa,{placeholder:m,value:i,onChange:j=>u(j.target.value),className:h})}const cs=s.memo(function({refreshTrigger:o,onTranscribe:m}){const{navigate:h}=Aa(),{getAuthHeaders:i}=Ae(),[u,j]=s.useState([]),[p,f]=s.useState(!0),[w,$]=s.useState(!1),[g,F]=s.useState({pageIndex:0,pageSize:10}),[q,L]=s.useState([]),[M,J]=s.useState([]),[n,S]=s.useState(""),[z,E]=s.useState({}),[c,k]=s.useState({}),[v,je]=s.useState(0),[ie,ve]=s.useState(0),[ke,Z]=s.useState(!1),[D,l]=s.useState(null),[b,x]=s.useState(!1),[C,y]=s.useState(new Set),[B,A]=s.useState(!1),[Y,ee]=s.useState({}),[le,U]=s.useState(!1),[ne,ue]=s.useState(!1),[R,Ne]=s.useState(null),T=s.useCallback(async(a,t,d,P=!1,X=!1)=>{try{P?f(!0):X||$(!0);const G=a||g.pageIndex+1,Q=t||g.pageSize,ge=d!==void 0?d:n,he=new URLSearchParams({page:G.toString(),limit:Q.toString()});ge&&he.set("q",ge);const xe=await fetch(`/api/v1/transcription/list?${he}`,{headers:{...i()}});if(xe.ok){const V=await xe.json();j(X?H=>{const pe=V.jobs||[],fe=H.map(_=>{const ce=pe.find(Ee=>Ee.id===_.id);return ce&&(ce.status!==_.status||ce.error_message!==_.error_message||JSON.stringify(ce.individual_transcripts)!==JSON.stringify(_.individual_transcripts))?{..._,...ce}:_}),W=new Set(H.map(_=>_.id)),be=pe.filter(_=>!W.has(_.id));return[...fe,...be]}:V.jobs||[]),je(V.pagination.total),ve(V.pagination.pages),ma(V.jobs||[]);const me=(V.jobs||[]).filter(H=>H.is_multi_track&&(H.status==="processing"||H.status==="pending"));if(me.length>0)try{const H=me.map(async W=>{const be=await fetch(`/api/v1/transcription/${W.id}/track-progress`,{headers:{...i()}});if(be.ok){const _=await be.json();return{jobId:W.id,progress:_}}return null}),pe=await Promise.all(H),fe={};pe.forEach(W=>{W&&(fe[W.jobId]=W.progress)}),ee(fe)}catch(H){console.error("Failed to fetch track progress:",H)}}}catch(G){console.error("Failed to fetch audio files:",G)}finally{f(!1),$(!1)}},[g.pageIndex,g.pageSize,n,i]),ma=async a=>{const t=a.filter(d=>d.status==="pending");if(t.length!==0)try{if((await fetch("/api/v1/admin/queue/stats",{headers:{...i()}})).ok){const P={};t.forEach((X,G)=>{P[X.id]=G+1}),E(P)}}catch(d){console.error("Failed to fetch queue positions:",d)}},$e=s.useCallback(a=>{u.find(d=>d.id===a)&&(k(d=>({...d,[a]:!1})),l(a),Z(!0))},[u]),Le=s.useCallback(a=>{u.find(d=>d.id===a)&&(k(d=>({...d,[a]:!1})),l(a),A(!0))},[u]),pa=s.useCallback(async a=>{if(!D)return;const t=u.find(d=>d.id===D);if(t?.is_multi_track&&!a.is_multi_track_enabled){alert("Multi-track audio requires a profile with multi-track transcription enabled. Please select or create a profile with multi-track support.");return}if(!t?.is_multi_track&&a.is_multi_track_enabled){alert("Multi-track transcription cannot be used with single-track audio files.");return}try{x(!0),(await fetch(`/api/v1/transcription/${D}/start`,{method:"POST",headers:{...i(),"Content-Type":"application/json"},body:JSON.stringify(a)})).ok?(Z(!1),l(null),T(),m&&m(D)):alert("Failed to start transcription")}catch{alert("Error starting transcription")}finally{x(!1)}},[D,T,m]),fa=s.useCallback(async(a,t)=>{if(!D)return;const d=u.find(P=>P.id===D);if(d?.is_multi_track&&!a.is_multi_track_enabled){alert("Multi-track audio requires a profile with multi-track transcription enabled. Please select a different profile with multi-track support.");return}if(!d?.is_multi_track&&a.is_multi_track_enabled){alert("Multi-track transcription cannot be used with single-track audio files. Please select a different profile.");return}try{x(!0),(await fetch(`/api/v1/transcription/${D}/start`,{method:"POST",headers:{...i(),"Content-Type":"application/json"},body:JSON.stringify(a)})).ok?(A(!1),l(null),T(),m&&m(D)):alert("Failed to start transcription")}catch{alert("Error starting transcription")}finally{x(!1)}},[D,T,m]),we=s.useCallback(a=>a.status!=="processing"&&a.status!=="pending",[]),ba=s.useCallback(async a=>{k(t=>({...t,[a]:!1}));try{(await fetch(`/api/v1/transcription/${a}`,{method:"DELETE",headers:{...i()}})).ok?T():alert("Failed to delete audio file")}catch{alert("Error deleting audio file")}},[T]),ya=s.useCallback(async a=>{k(t=>({...t,[a]:!1}));try{y(d=>new Set(d).add(a)),(await fetch(`/api/v1/transcription/${a}/kill`,{method:"POST",headers:{...i()}})).ok?T():alert("Failed to kill transcription job")}catch{alert("Error killing transcription job")}finally{y(t=>{const d=new Set(t);return d.delete(a),d})}},[T]);s.useEffect(()=>{const a=u.length===0;T(void 0,void 0,void 0,a)},[o,T]),s.useEffect(()=>{u.length>0&&T(g.pageIndex+1,g.pageSize,n||void 0)},[g.pageIndex,g.pageSize,n,T]),s.useEffect(()=>{n!==void 0&&F(a=>({...a,pageIndex:0}))},[n]);const K=s.useRef(null);s.useEffect(()=>{const a=u.filter(t=>t.status==="pending"||t.status==="processing");if(K.current&&(clearInterval(K.current),K.current=null),a.length>0){const d=a.some(P=>P.status==="processing")?2e3:5e3;K.current=setInterval(()=>{T(void 0,void 0,void 0,!1,!0)},d)}return()=>{K.current&&(clearInterval(K.current),K.current=null)}},[u,T]);const Me=s.useCallback(a=>{const d=a.status,P=z[a.id],X=Y[a.id];if(a.is_multi_track&&d==="processing"&&X){const{progress:G,tracks:Q}=X,ge=Math.round(G.percentage||0),he=G.completed_tracks||0,xe=G.total_tracks||0;return e.jsxs(ae,{children:[e.jsx(se,{asChild:!0,children:e.jsxs("div",{className:"cursor-help inline-flex items-center gap-1",children:[e.jsx("div",{className:"relative",children:e.jsx(re,{size:16,className:"text-blue-400 animate-spin"})}),e.jsxs("span",{className:"text-xs text-blue-400 font-medium",children:[he,"/",xe]})]})}),e.jsx(te,{className:"bg-gray-900 border-gray-700 text-white",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{children:["Multi-Track Processing (",ge,"%)"]}),e.jsxs("div",{className:"space-y-1",children:[Q&&Q.slice(0,5).map((V,me)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${V.status==="completed"?"bg-green-400":V.status==="processing"?"bg-blue-400":"bg-gray-400"}`}),e.jsx("span",{children:V.track_name})]},me)),Q&&Q.length>5&&e.jsxs("p",{className:"text-xs text-gray-400",children:["...and ",Q.length-5," more"]})]})]})})]})}switch(d){case"completed":return e.jsxs(ae,{children:[e.jsx(se,{asChild:!0,children:e.jsx("div",{className:"cursor-help inline-block",children:e.jsx(oa,{size:16,className:"text-green-500"})})}),e.jsx(te,{className:"bg-gray-900 border-gray-700 text-white",children:e.jsx("p",{children:"Completed"})})]});case"processing":return e.jsxs(ae,{children:[e.jsx(se,{asChild:!0,children:e.jsx("div",{className:"cursor-help inline-block",children:e.jsx(re,{size:16,className:"text-blue-400 animate-spin"})})}),e.jsx(te,{className:"bg-gray-900 border-gray-700 text-white",children:e.jsx("p",{children:"Processing"})})]});case"failed":return e.jsxs(ae,{children:[e.jsx(se,{asChild:!0,children:e.jsx("div",{className:"cursor-help inline-block",children:e.jsx(Ea,{size:16,className:"text-magenta-400"})})}),e.jsx(te,{className:"bg-gray-900 border-gray-700 text-white",children:e.jsx("p",{children:"Failed"})})]});case"pending":return e.jsxs(ae,{children:[e.jsx(se,{asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-1 cursor-help inline-flex",children:[e.jsx(Oa,{size:12,className:"text-purple-400"}),e.jsx("span",{className:"text-xs text-purple-400 font-medium",children:P||"?"})]})}),e.jsx(te,{className:"bg-gray-900 border-gray-700 text-white",children:e.jsxs("p",{children:["Queued (Position ",P||"?",")"]})})]});case"uploaded":default:return e.jsxs(ae,{children:[e.jsx(se,{asChild:!0,children:e.jsx("div",{className:"cursor-help inline-block",children:e.jsx(za,{size:16,className:"text-blue-500"})})}),e.jsx(te,{className:"bg-gray-900 border-gray-700 text-white",children:e.jsx("p",{children:"Uploaded"})})]})}},[z,Y]),ja=s.useCallback(a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),[]),oe=s.useCallback(a=>{const t=a.split("/");return t[t.length-1]},[]),ze=s.useCallback(a=>{h({path:"audio-detail",params:{id:a}})},[h]),Oe=s.useMemo(()=>[{accessorFn:a=>a.title||oe(a.audio_path),id:"title",header:({column:a})=>e.jsxs(N,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),className:"h-auto p-0 font-medium",children:["Title",a.getIsSorted()==="asc"?e.jsx(Se,{className:"ml-2 h-4 w-4"}):a.getIsSorted()==="desc"?e.jsx(Ce,{className:"ml-2 h-4 w-4"}):e.jsx(De,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>{const t=a.original;return e.jsx("button",{onClick:()=>ze(t.id),className:"text-gray-900 dark:text-gray-50 font-medium hover:text-blue-600 dark:hover:text-blue-400 transition-colors cursor-pointer text-left",children:t.title||oe(t.audio_path)})},enableGlobalFilter:!1},{accessorKey:"created_at",header:({column:a})=>e.jsxs(N,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),className:"h-auto p-0 font-medium",children:["Date Added",a.getIsSorted()==="asc"?e.jsx(Se,{className:"ml-2 h-4 w-4"}):a.getIsSorted()==="desc"?e.jsx(Ce,{className:"ml-2 h-4 w-4"}):e.jsx(De,{className:"ml-2 h-4 w-4"})]}),cell:({getValue:a})=>e.jsx("span",{className:"text-gray-600 dark:text-gray-300 text-sm",children:ja(a())}),enableGlobalFilter:!1},{accessorKey:"status",header:({column:a})=>e.jsx("div",{className:"text-center w-full",children:e.jsxs(N,{variant:"ghost",onClick:()=>a.toggleSorting(a.getIsSorted()==="asc"),className:"h-auto p-0 font-medium",children:["Status",a.getIsSorted()==="asc"?e.jsx(Se,{className:"ml-2 h-4 w-4"}):a.getIsSorted()==="desc"?e.jsx(Ce,{className:"ml-2 h-4 w-4"}):e.jsx(De,{className:"ml-2 h-4 w-4"})]})}),cell:({row:a})=>e.jsx("div",{className:"text-center",children:Me(a.original)}),enableGlobalFilter:!1},{id:"actions",header:()=>e.jsx("div",{className:"text-center w-full",children:"Actions"}),cell:({row:a})=>{const t=a.original;return e.jsx("div",{className:"text-center",children:e.jsxs(Ta,{open:c[t.id]||!1,onOpenChange:d=>k(P=>({...P,[t.id]:d})),children:[e.jsx(Pa,{asChild:!0,children:e.jsx(N,{variant:"ghost",size:"sm",className:"h-8 w-8 sm:h-9 sm:w-9 p-0 cursor-pointer",children:e.jsx(Ua,{className:"h-5 w-5"})})}),e.jsx(Fa,{className:"w-40 bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-600 p-1",children:e.jsxs("div",{className:"space-y-1",children:[t.status==="completed"&&e.jsxs(N,{variant:"ghost",size:"sm",className:"w-full justify-start h-8 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>{k(d=>({...d,[t.id]:!1})),h({path:"chat",params:{audioId:t.id}})},children:[e.jsx(Ra,{className:"mr-2 h-4 w-4"}),"Open Chat"]}),e.jsxs(N,{variant:"ghost",size:"sm",className:"w-full justify-start h-8 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer disabled:cursor-not-allowed",disabled:!we(t),onClick:()=>Le(t.id),children:[e.jsx(ls,{className:"mr-2 h-4 w-4"}),"Transcribe"]}),e.jsxs(N,{variant:"ghost",size:"sm",className:"w-full justify-start h-8 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer disabled:cursor-not-allowed",disabled:!we(t),onClick:()=>$e(t.id),children:[e.jsx(ns,{className:"mr-2 h-4 w-4"}),"Transcribe+"]}),t.status==="processing"&&e.jsx(N,{variant:"ghost",size:"sm",className:"w-full justify-start h-8 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-orange-500 dark:text-orange-400 hover:text-orange-600 dark:hover:text-orange-300 cursor-pointer",disabled:C.has(t.id),onClick:()=>{Ne(t),U(!0)},children:C.has(t.id)?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"mr-2 h-4 w-4 animate-spin"}),"Stopping..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Va,{className:"mr-2 h-4 w-4"}),"Stop"]})}),e.jsxs(N,{variant:"ghost",size:"sm",className:"w-full justify-start h-8 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-red-500 dark:text-red-400 hover:text-red-600 dark:hover:text-red-300 cursor-pointer",onClick:()=>{Ne(t),ue(!0)},children:[e.jsx(Ha,{className:"mr-2 h-4 w-4"}),"Delete"]})]})})]})})},enableSorting:!1,enableGlobalFilter:!1}],[c,z,Y,Me,ze,$e,Le,we,oe,C,Ne,U,ue]),I=Za({data:u,columns:Oe,state:{sorting:q,columnFilters:M,globalFilter:n,pagination:g},onSortingChange:L,onColumnFiltersChange:J,onGlobalFilterChange:S,onPaginationChange:F,getCoreRowModel:es(),getSortedRowModel:Ya(),manualPagination:!0,pageCount:ie});return p?e.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-xl p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-1/4 mb-6"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((a,t)=>e.jsx("div",{className:"h-12 bg-gray-100 dark:bg-gray-600/50 rounded-lg"},t))})]})}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"p-3 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-50 mb-2",children:"Audio Files"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:n?`${v} file${v!==1?"s":""} found`:`${v} file${v!==1?"s":""} total`})]}),e.jsxs("div",{className:"relative w-full sm:w-72",children:[e.jsx(Ja,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4 z-10"}),e.jsx(os,{placeholder:"Search audio files...",value:n??"",onChange:S,className:"pl-10 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600"})]})]}),u.length===0&&!p?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"text-5xl mb-4 opacity-50",children:"ðŸŽµ"}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 dark:text-gray-300 mb-2",children:n?"No matching audio files":"No audio files yet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:n?"Try adjusting your search terms":"Upload your first audio file to get started"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`border border-gray-100 dark:border-gray-900 rounded-lg overflow-hidden relative transition-opacity duration-200 ${w?"opacity-75":""}`,children:[w&&e.jsx("div",{className:"absolute inset-0 bg-white/20 dark:bg-gray-800/20 flex items-center justify-center z-10",children:e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 px-3 py-1 rounded-md shadow-sm",children:[e.jsx(re,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"Loading..."})]})}),e.jsxs(as,{children:[e.jsx(ss,{className:"hidden sm:table-header-group",children:I.getHeaderGroups().map(a=>e.jsx(Te,{className:"bg-gray-50 dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 border-b border-gray-100 dark:border-gray-900",children:a.headers.map(t=>e.jsx(rs,{className:`text-gray-700 dark:text-gray-300 ${t.column.id==="created_at"?"hidden sm:table-cell":""} ${t.column.id==="title"?"w-full":""} ${t.column.id==="status"?"w-10 text-center":""} ${t.column.id==="actions"?"w-10 text-center":""}`,children:t.isPlaceholder?null:Xe(t.column.columnDef.header,t.getContext())},t.id))},a.id))}),e.jsx(ts,{children:I.getRowModel().rows?.length?I.getRowModel().rows.map(a=>e.jsx(Te,{className:"hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 border-b border-gray-100 dark:border-gray-700 last:border-b-0",children:a.getVisibleCells().map(t=>e.jsx(Qe,{className:`
															${t.column.id==="created_at"?"hidden sm:table-cell":""}
															${t.column.id==="title"?"whitespace-normal break-words pr-1 sm:pr-2":""}
															${t.column.id==="status"?"w-[36px] px-1 text-center":""}
															${t.column.id==="actions"?"w-[36px] px-1 text-center":""}
														`,children:Xe(t.column.columnDef.cell,t.getContext())},t.id))},a.id)):e.jsx(Te,{children:e.jsx(Qe,{colSpan:Oe.length,className:"h-24 text-center",children:"No results."})})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 px-2 py-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:n?`Showing ${g.pageIndex*g.pageSize+1} to ${Math.min((g.pageIndex+1)*g.pageSize,v)} of ${v} entries (filtered)`:`Showing ${g.pageIndex*g.pageSize+1} to ${Math.min((g.pageIndex+1)*g.pageSize,v)} of ${v} entries`})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{variant:"outline",size:"sm",onClick:()=>I.setPageIndex(0),disabled:!I.getCanPreviousPage(),className:"text-gray-600 dark:text-gray-400",children:e.jsx(Ga,{className:"h-4 w-4"})}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>I.previousPage(),disabled:!I.getCanPreviousPage(),className:"text-gray-600 dark:text-gray-400",children:e.jsx(qa,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Page ",I.getState().pagination.pageIndex+1," of"," ",ie]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>I.nextPage(),disabled:!I.getCanNextPage(),className:"text-gray-600 dark:text-gray-400",children:e.jsx(Wa,{className:"h-4 w-4"})}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>I.setPageIndex(ie-1),disabled:!I.getCanNextPage(),className:"text-gray-600 dark:text-gray-400",children:e.jsx(Ba,{className:"h-4 w-4"})})]})]})]})]}),e.jsx(ka,{open:ke,onOpenChange:Z,onStartTranscription:pa,loading:b,isMultiTrack:D&&u.find(a=>a.id===D)?.is_multi_track||!1}),e.jsx(is,{open:B,onOpenChange:A,onStartTranscription:fa,loading:b}),e.jsx(Ue,{open:le,onOpenChange:U,children:e.jsxs(Re,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[e.jsxs(Ve,{children:[e.jsx(He,{className:"text-gray-900 dark:text-gray-100",children:"Stop Transcription"}),e.jsxs(Je,{className:"text-gray-600 dark:text-gray-400",children:['Are you sure you want to stop the transcription of "',R?.title||(R?oe(R.audio_path):""),'"? This will cancel the current transcription process.']})]}),e.jsxs(Ge,{children:[e.jsx(qe,{className:"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx(We,{className:"bg-orange-600 text-white hover:bg-orange-700",onClick:()=>{R&&ya(R.id),U(!1)},children:"Stop Transcription"})]})]})}),e.jsx(Ue,{open:ne,onOpenChange:ue,children:e.jsxs(Re,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[e.jsxs(Ve,{children:[e.jsx(He,{className:"text-gray-900 dark:text-gray-100",children:"Delete Audio File"}),e.jsxs(Je,{className:"text-gray-600 dark:text-gray-400",children:['Are you sure you want to delete "',R?.title||(R?oe(R.audio_path):""),'"? This action cannot be undone and will permanently remove the audio file and any transcription data.']})]}),e.jsxs(Ge,{children:[e.jsx(qe,{className:"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700",children:"Cancel"}),e.jsx(We,{className:"bg-red-600 text-white hover:bg-red-700",onClick:()=>{R&&ba(R.id),ue(!1)},children:"Delete"})]})]})})]})});function ds({isDragging:r,dragCount:o,fileType:m="single",fileDescription:h,errorMessage:i}){if(!r||o===0)return null;const u=()=>{if(i)return e.jsx(de,{className:"h-16 w-16 text-red-400"});switch(m){case"multitrack":return e.jsx(Xa,{className:"h-16 w-16 text-blue-400"});case"video":return e.jsx(Ka,{className:"h-16 w-16 text-purple-400"});case"single":return e.jsx(da,{className:"h-16 w-16 text-green-400"});default:return e.jsx(ca,{className:"h-16 w-16 text-gray-400"})}},j=()=>{if(i)return"Invalid Files";switch(m){case"multitrack":return"Multi-Track Audio Project";case"video":return"Video Files";case"single":return"Audio Files";default:return"Drop Files Here"}},p=()=>i||h||"Release to upload",f=()=>{if(i)return"border-red-400";switch(m){case"multitrack":return"border-blue-400";case"video":return"border-purple-400";case"single":return"border-green-400";default:return"border-gray-400"}},w=()=>{if(i)return"bg-red-50 dark:bg-red-950/20";switch(m){case"multitrack":return"bg-blue-50 dark:bg-blue-950/20";case"video":return"bg-purple-50 dark:bg-purple-950/20";case"single":return"bg-green-50 dark:bg-green-950/20";default:return"bg-gray-50 dark:bg-gray-950/20"}};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20 dark:bg-black/40 backdrop-blur-sm"}),e.jsxs("div",{className:O("relative flex flex-col items-center justify-center","w-96 h-64 mx-4","border-4 border-dashed rounded-2xl","transition-all duration-300 ease-out","animate-pulse",f(),w()),children:[e.jsx("div",{className:"mb-4 transform transition-transform duration-300 scale-110",children:u()}),e.jsx("h2",{className:O("text-2xl font-bold mb-2 text-center",i?"text-red-700 dark:text-red-300":"text-gray-900 dark:text-gray-100"),children:j()}),e.jsx("p",{className:O("text-center px-4 leading-relaxed",i?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"),children:p()}),m==="multitrack"&&!i&&e.jsx("div",{className:"mt-3 px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-full text-sm font-medium",children:"Auto-detected multi-track project"})]}),e.jsx("div",{className:O("absolute inset-8","border-2 border-dashed rounded-3xl","opacity-30","animate-ping",f())})]})}function us({open:r,onOpenChange:o,onMultiTrackUpload:m,prePopulatedFiles:h,prePopulatedAupFile:i,prePopulatedTitle:u}){const[j,p]=s.useState(""),[f,w]=s.useState([]);s.useEffect(()=>{if(r&&h&&i){u&&p(u);const k=[...h,i].map(v=>({file:v,id:Math.random().toString(36),isApu:v.name.toLowerCase().endsWith(".aup")}));w(k)}else r||(p(""),w([]))},[r,h,i,u]);const $=s.useCallback(c=>{c.preventDefault();const k=Array.from(c.dataTransfer.files);F(k)},[]),g=s.useCallback(c=>{if(c.target.files){const k=Array.from(c.target.files);F(k)}},[]),F=c=>{const k=c.map(v=>({file:v,id:Math.random().toString(36),isApu:v.name.toLowerCase().endsWith(".aup")}));w(v=>[...v,...k])},q=c=>{w(k=>k.filter(v=>v.id!==c))},L=f.filter(c=>!c.isApu),M=f.filter(c=>c.isApu),J=M.length>0,n=L.length>0,S=j.trim()!==""&&J&&n,z=async()=>{if(!S)return;const c=L.map(v=>v.file),k=M[0].file;await m?.(c,k,j.trim()),p(""),w([]),o(!1)},E=c=>c.replace(/\.[^/.]+$/,"");return e.jsx(sa,{open:r,onOpenChange:o,children:e.jsxs(ta,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[e.jsxs(ra,{children:[e.jsx(ia,{children:"Upload Multi-Track Audio"}),e.jsx(la,{children:h&&i?`Auto-detected multi-track project with ${h.length} audio tracks. Review and upload when ready.`:"Upload multiple audio tracks with an .aup Audacity project file for multi-speaker transcription."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Pe,{htmlFor:"title",children:"Title *"}),e.jsx(aa,{id:"title",placeholder:"Enter a title for this recording...",value:j,onChange:c=>p(c.target.value)})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Pe,{children:"Files"}),e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors border-gray-300 hover:border-gray-400 hover:bg-gray-50",onDrop:$,onDragOver:c=>c.preventDefault(),children:[e.jsx(ca,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium",children:"Drop files here or click to upload"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Upload multiple audio files and one .aup Audacity project file"}),e.jsx("input",{type:"file",multiple:!0,accept:"audio/*,.aup",onChange:g,className:"hidden",id:"file-upload"}),e.jsx("label",{htmlFor:"file-upload",className:"inline-block px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 cursor-pointer transition-colors",children:"Choose Files"})]})]}),f.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Uploaded Files:"}),M.map(c=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(Qa,{className:"h-4 w-4 text-green-600 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-green-800 truncate",children:c.file.name}),e.jsx("p",{className:"text-xs text-green-600",children:"Audacity project file"})]}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>q(c.id),children:e.jsx(Fe,{className:"h-4 w-4"})})]},c.id)),L.map(c=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(da,{className:"h-4 w-4 text-blue-600 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-blue-800 truncate",children:c.file.name}),e.jsxs("p",{className:"text-xs text-blue-600",children:["Speaker: ",E(c.file.name)]})]}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>q(c.id),children:e.jsx(Fe,{className:"h-4 w-4"})})]},c.id))]}),f.length>0&&e.jsxs("div",{className:"space-y-1 text-sm",children:[!J&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{children:"An .aup Audacity project file is required"})]}),!n&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{children:"At least one audio file is required"})]}),!j.trim()&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{children:"Title is required"})]})]})]})]}),e.jsxs(na,{children:[e.jsx(N,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(N,{onClick:z,disabled:!S,children:"Upload"})]})]})})}var Ie="Progress",_e=100,[gs,Fs]=va(Ie),[hs,xs]=gs(Ie),ua=s.forwardRef((r,o)=>{const{__scopeProgress:m,value:h=null,max:i,getValueLabel:u=ms,...j}=r;(i||i===0)&&!Ze(i)&&console.error(ps(`${i}`,"Progress"));const p=Ze(i)?i:_e;h!==null&&!Ye(h,p)&&console.error(fs(`${h}`,"Progress"));const f=Ye(h,p)?h:null,w=ye(f)?u(f,p):void 0;return e.jsx(hs,{scope:m,value:f,max:p,children:e.jsx(ea.div,{"aria-valuemax":p,"aria-valuemin":0,"aria-valuenow":ye(f)?f:void 0,"aria-valuetext":w,role:"progressbar","data-state":xa(f,p),"data-value":f??void 0,"data-max":p,...j,ref:o})})});ua.displayName=Ie;var ga="ProgressIndicator",ha=s.forwardRef((r,o)=>{const{__scopeProgress:m,...h}=r,i=xs(ga,m);return e.jsx(ea.div,{"data-state":xa(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...h,ref:o})});ha.displayName=ga;function ms(r,o){return`${Math.round(r/o*100)}%`}function xa(r,o){return r==null?"indeterminate":r===o?"complete":"loading"}function ye(r){return typeof r=="number"}function Ze(r){return ye(r)&&!isNaN(r)&&r>0}function Ye(r,o){return ye(r)&&!isNaN(r)&&r<=o&&r>=0}function ps(r,o){return`Invalid prop \`max\` of value \`${r}\` supplied to \`${o}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${_e}\`.`}function fs(r,o){return`Invalid prop \`value\` of value \`${r}\` supplied to \`${o}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${_e} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var bs=ua,ys=ha;function js({className:r,value:o,...m}){return e.jsx(bs,{"data-slot":"progress",className:O("relative h-2 w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",r),...m,children:e.jsx(ys,{"data-slot":"progress-indicator",className:"h-full w-full flex-1 bg-blue-500 transition-all",style:{transform:`translateX(-${100-(o||0)}%)`}})})}function As(){const{getAuthHeaders:r}=Ae(),[o,m]=s.useState(0),[h,i]=s.useState([]),[u,j]=s.useState(!1),[p,f]=s.useState(!1),[w,$]=s.useState(0),[g,F]=s.useState(null),[q,L]=s.useState(!1),[M,J]=s.useState(null),n=s.useRef(0),S=async l=>{const b=new FormData;b.append("audio",l),b.append("title",l.name.replace(/\.[^/.]+$/,""));try{return(await fetch("/api/v1/transcription/upload",{method:"POST",headers:{...r()},body:b})).ok}catch{return!1}},z=async l=>{const b=new FormData;b.append("video",l),b.append("title",l.name.replace(/\.[^/.]+$/,""));try{return(await fetch("/api/v1/transcription/upload-video",{method:"POST",headers:{...r()},body:b})).ok}catch{return!1}},E=async l=>{const b=Array.isArray(l)?l:[l],x=b.map(y=>"file"in y&&"isVideo"in y?y:{file:y,isVideo:!1});if(x.length===0)return;j(!0),i(x.map(y=>({fileName:y.file.name,status:"uploading"})));let C=0;for(let y=0;y<x.length;y++){const B=x[y],A=B.file,Y=B.isVideo;try{const ee=Y?await z(A):await S(A);i(le=>le.map((U,ne)=>ne===y?{...U,status:ee?"success":"error",error:ee?void 0:Y?"Video upload failed":"Upload failed"}:U)),ee&&C++}catch{i(le=>le.map((U,ne)=>ne===y?{...U,status:"error",error:"Network error"}:U))}}j(!1),C>0&&m(y=>y+1),C===b.length&&setTimeout(()=>i([]),3e3)},c=()=>{m(l=>l+1)},k=()=>{i([])},v=async(l,b,x)=>{j(!0);const C={fileName:`${x} (${l.length} tracks)`,status:"uploading"};i([C]);try{const y=new FormData;y.append("title",x),y.append("aup",b),l.forEach(A=>{y.append("tracks",A)});const B=await fetch("/api/v1/transcription/upload-multitrack",{method:"POST",headers:{...r()},body:y});if(B.ok)i([{...C,status:"success"}]),m(A=>A+1),setTimeout(()=>i([]),3e3);else{const A=await B.json();i([{...C,status:"error",error:A.error||"Upload failed"}])}}catch{i([{...C,status:"error",error:"Upload failed: Network error"}])}finally{j(!1)}},je=s.useCallback(l=>{if(l.preventDefault(),l.stopPropagation(),n.current++,l.dataTransfer.items&&l.dataTransfer.items.length>0){f(!0),$(n.current);const b=Array.from(l.dataTransfer.items).filter(x=>x.kind==="file").map(x=>x.getAsFile()).filter(x=>x!==null);if(b.length>0){const x=Be(b);F(x)}}},[]),ie=s.useCallback(l=>{l.preventDefault(),l.stopPropagation(),n.current--,n.current===0&&(f(!1),$(0),F(null))},[]),ve=s.useCallback(l=>{l.preventDefault(),l.stopPropagation()},[]),ke=s.useCallback(async l=>{l.preventDefault(),l.stopPropagation(),n.current=0,f(!1),$(0),F(null);const b=Array.from(l.dataTransfer.files);if(b.length===0)return;const x=Be(b);if(!Ke(x)){console.error("Invalid files dropped");return}if(x.type==="multitrack"){const C=Na(x);C&&(J(C),L(!0))}else if(x.type==="video"){const C=wa(x.files,!0);await E(C)}else await E(x.files)},[]),Z=s.useCallback(()=>{L(!1),J(null)},[]),D=s.useCallback(async(l,b,x)=>{await v(l,b,x),Z()},[]);return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",onDragEnter:je,onDragLeave:ie,onDragOver:ve,onDrop:ke,children:[e.jsxs("div",{className:"mx-auto w-full max-w-6xl px-2 sm:px-6 md:px-8 py-3 sm:py-6",children:[e.jsx(Sa,{onFileSelect:E,onMultiTrackClick:()=>L(!0),onDownloadComplete:()=>m(l=>l+1)}),h.length>0&&e.jsxs("div",{className:"mb-4 sm:mb-6 bg-white dark:bg-gray-800 rounded-xl p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:["Uploading Files (",h.filter(l=>l.status==="success").length,"/",h.length,")"]}),!u&&e.jsx("button",{onClick:k,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors cursor-pointer",children:e.jsx(Fe,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"})})]}),e.jsx("div",{className:"mb-4",children:e.jsx(js,{value:h.filter(l=>l.status!=="uploading").length/h.length*100,className:"h-2"})}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:h.map((l,b)=>e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsxs("div",{className:"flex-shrink-0",children:[l.status==="uploading"&&e.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),l.status==="success"&&e.jsx(oa,{className:"w-4 h-4 text-green-500"}),l.status==="error"&&e.jsx(de,{className:"w-4 h-4 text-red-500"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"truncate text-gray-900 dark:text-gray-100",children:l.fileName}),l.error&&e.jsx("div",{className:"text-red-500 dark:text-red-400 text-xs",children:l.error})]}),e.jsxs("div",{className:"flex-shrink-0 text-xs text-gray-500 dark:text-gray-400",children:[l.status==="uploading"&&"Uploading...",l.status==="success"&&"Completed",l.status==="error"&&"Failed"]})]},b))})]}),e.jsx(cs,{refreshTrigger:o,onTranscribe:c})]}),e.jsx(ds,{isDragging:p,dragCount:w,fileType:g?.type,fileDescription:g?Da(g):void 0,errorMessage:g&&!Ke(g)?g.type==="multitrack"?Ca([...g.files,g.aupFile]).error:"No supported files found":void 0}),e.jsx(us,{open:q,onOpenChange:Z,onMultiTrackUpload:D,prePopulatedFiles:M?.audioFiles,prePopulatedAupFile:M?.aupFile,prePopulatedTitle:M?.title})]})}export{As as Homepage};
