import{r as s,j as e,u as Ne,P as te,d as us,e as ps,O as hs,f as fs,g as Le,h as sa}from"./ui-vendor-rA8IexKS.js";import{T as ys,u as bs,D as ra,c as na,d as la,e as pe,S as ia,P as js,a as Ns,b as ks}from"./textarea-Bups9Y6L.js";import{C as ka,B as Y,u as Dt,e as ws,L as Qe,I as vs,c as Re,a as _s,f as Ss,g as Cs,h as Ts}from"./index-hSqt8rb2.js";import{D as de,a as ce,b as me,c as xe,e as wa,d as he}from"./index-DHJEQtTr.js";import{C as Es}from"./ChatInterface-DZleLnGr.js";import{s as Ds,C as St,t as As,u as va,X as At,P as _a,T as Is,q as je,L as Ze,k as Ms,p as $s,d as Ls,b as Ct,A as oa,f as Rs,e as Ps,v as da,w as ca,x as ma,y as xa,z as bt,I as jt,B as fe,D as ga,G as Nt,J as ua,K as pa,i as ha,N as kt,O as zs}from"./lucide-vendor-DI6dXaZX.js";import{M as Fs,r as Os,a as Bs,b as Us,c as Vs}from"./markdown-vendor-B8FCJfI7.js";import"./react-vendor-gH-7aFTg.js";function Gs({notes:r,onEdit:l,onDelete:d,onJumpTo:j}){const[x,i]=s.useState(null),[b,o]=s.useState(""),[C,h]=s.useState(!1),[v,N]=s.useState(null),[I,k]=s.useState(null),$=y=>{i(y.id),o(y.content)},V=()=>{i(null),o("")},U=async y=>{try{h(!0),await l(y,b.trim()),i(null),o("")}finally{h(!1)}},R=async y=>{N(y);try{await d(y)}finally{N(null)}},_=y=>{const A=Math.floor(y/60),L=Math.floor(y%60).toString().padStart(2,"0");return`${A}:${L}`};return e.jsxs("div",{className:"h-full overflow-y-auto space-y-2",children:[r.length===0&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"No notes yet. Select transcript text to add one."}),r.map(y=>e.jsxs(ka,{className:"p-2 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between gap-1.5",children:[e.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-300 font-mono",children:e.jsxs("button",{className:"hover:underline",onClick:()=>j(y.start_time),title:"Jump to time",children:[e.jsx(Ds,{className:"inline h-3 w-3 mr-1"})," ",_(y.start_time)," - ",_(y.end_time)]})}),e.jsxs("div",{className:"flex items-center gap-0.5",children:[e.jsx(Y,{size:"icon",variant:"ghost",className:"h-6 w-6",title:I===y.id?"Copied":"Copy note",onClick:async()=>{try{await navigator.clipboard.writeText(y.content||""),k(y.id),setTimeout(()=>k(A=>A===y.id?null:A),1200)}catch{}},children:I===y.id?e.jsx(St,{className:"h-3.5 w-3.5"}):e.jsx(As,{className:"h-3.5 w-3.5"})}),x===y.id?e.jsxs(e.Fragment,{children:[e.jsx(Y,{size:"icon",variant:"ghost",className:"h-6 w-6",disabled:C,onClick:()=>U(y.id),title:"Save",children:e.jsx(va,{className:"h-3.5 w-3.5"})}),e.jsx(Y,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:V,title:"Cancel",children:e.jsx(At,{className:"h-3.5 w-3.5"})})]}):e.jsx(Y,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>$(y),title:"Edit",children:e.jsx(_a,{className:"h-3.5 w-3.5"})}),e.jsx(Y,{size:"icon",variant:"ghost",className:"h-6 w-6",disabled:v===y.id,onClick:()=>R(y.id),title:"Delete",children:e.jsx(Is,{className:"h-3.5 w-3.5"})})]})]}),e.jsx("blockquote",{className:"text-xs text-gray-500 dark:text-gray-400 border-l-2 border-gray-300 dark:border-gray-600 pl-2 mt-1 italic select-text",children:y.quote}),x===y.id?e.jsx("div",{className:"mt-1",children:e.jsx(ys,{value:b,onChange:A=>o(A.target.value),rows:3})}):e.jsx("p",{className:"mt-1 text-sm text-gray-800 dark:text-gray-100 whitespace-pre-wrap",children:y.content})]},y.id))]})}const Ws=({open:r,onOpenChange:l,transcriptionId:d,onSpeakerMappingsUpdate:j,initialSpeakers:x=[]})=>{const{getAuthHeaders:i}=Dt(),[b,o]=s.useState({}),[C,h]=s.useState(!1),[v,N]=s.useState(!1),[I,k]=s.useState(null);s.useEffect(()=>{r&&d&&$()},[r,d]);const $=async()=>{h(!0),k(null);try{const _=await fetch(`/api/v1/transcription/${d}/speakers`,{headers:{...i()}});if(!_.ok)throw new Error(`Failed to fetch speaker mappings: ${_.statusText}`);const y=await _.json(),A={};y.forEach(L=>{A[L.original_speaker]=L.custom_name}),x.forEach(L=>{A[L]||(A[L]=L)}),o(A)}catch(_){console.error("Error fetching speaker mappings:",_),k(_ instanceof Error?_.message:"Failed to fetch speaker mappings");const y={};x.forEach(A=>{y[A]=A}),o(y)}finally{h(!1)}},V=(_,y)=>{o(A=>({...A,[_]:y}))},U=async()=>{N(!0),k(null);try{const _=Object.entries(b).map(([L,D])=>({original_speaker:L,custom_name:D})),y=await fetch(`/api/v1/transcription/${d}/speakers`,{method:"POST",headers:{"Content-Type":"application/json",...i()},body:JSON.stringify({mappings:_})});if(!y.ok)throw new Error(`Failed to save speaker mappings: ${y.statusText}`);const A=await y.json();j(A),l(!1)}catch(_){console.error("Error saving speaker mappings:",_),k(_ instanceof Error?_.message:"Failed to save speaker mappings")}finally{N(!1)}},R=Object.keys(b).sort();return e.jsx(de,{open:r,onOpenChange:l,children:e.jsxs(ce,{className:"sm:max-w-md",children:[e.jsx(me,{children:e.jsxs(xe,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5"}),"Rename Speakers"]})}),C?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Ze,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Loading speakers..."})]}):e.jsxs("div",{className:"space-y-4",children:[I&&e.jsx("div",{className:"p-3 rounded-md bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:I})}),R.length===0?e.jsx(ka,{children:e.jsxs(ws,{className:"pt-6 text-center text-muted-foreground",children:[e.jsx(je,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No speakers found with diarization enabled."})]})}):e.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:R.map(_=>e.jsxs("div",{className:"space-y-1",children:[e.jsx(Qe,{htmlFor:`speaker-${_}`,className:"text-xs font-medium text-muted-foreground",children:_}),e.jsx(vs,{id:`speaker-${_}`,value:b[_]||"",onChange:y=>V(_,y.target.value),placeholder:`Enter custom name for ${_}`,className:"transition-all duration-200 focus:ring-2 focus:ring-primary/20"})]},_))})]}),e.jsxs(wa,{className:"gap-2",children:[e.jsxs(Y,{variant:"outline",onClick:()=>l(!1),disabled:v,children:[e.jsx(At,{className:"h-4 w-4 mr-1"}),"Cancel"]}),e.jsx(Y,{onClick:U,disabled:v||R.length===0,className:"min-w-[100px]",children:v?e.jsxs(e.Fragment,{children:[e.jsx(Ze,{className:"h-4 w-4 mr-1 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(va,{className:"h-4 w-4 mr-1"}),"Save"]})})]})]})})};var fa=1,Ys=.9,Hs=.8,qs=.17,wt=.1,vt=.999,Js=.9999,Ks=.99,Xs=/[\\\/_+.#"@\[\(\{&]/,Qs=/[\\\/_+.#"@\[\(\{&]/g,Zs=/[\s-]/,Sa=/[\s-]/g;function Tt(r,l,d,j,x,i,b){if(i===l.length)return x===r.length?fa:Ks;var o=`${x},${i}`;if(b[o]!==void 0)return b[o];for(var C=j.charAt(i),h=d.indexOf(C,x),v=0,N,I,k,$;h>=0;)N=Tt(r,l,d,j,h+1,i+1,b),N>v&&(h===x?N*=fa:Xs.test(r.charAt(h-1))?(N*=Hs,k=r.slice(x,h-1).match(Qs),k&&x>0&&(N*=Math.pow(vt,k.length))):Zs.test(r.charAt(h-1))?(N*=Ys,$=r.slice(x,h-1).match(Sa),$&&x>0&&(N*=Math.pow(vt,$.length))):(N*=qs,x>0&&(N*=Math.pow(vt,h-x))),r.charAt(h)!==l.charAt(i)&&(N*=Js)),(N<wt&&d.charAt(h-1)===j.charAt(i+1)||j.charAt(i+1)===j.charAt(i)&&d.charAt(h-1)!==j.charAt(i))&&(I=Tt(r,l,d,j,h+1,i+2,b),I*wt>N&&(N=I*wt)),N>v&&(v=N),h=d.indexOf(C,h+1);return b[o]=v,v}function ya(r){return r.toLowerCase().replace(Sa," ")}function er(r,l,d){return r=d&&d.length>0?`${r+" "+d.join(" ")}`:r,Tt(r,l,ya(r),ya(l),0,0,{})}var $e='[cmdk-group=""]',_t='[cmdk-group-items=""]',tr='[cmdk-group-heading=""]',Ca='[cmdk-item=""]',ba=`${Ca}:not([aria-disabled="true"])`,Et="cmdk-item-select",ye="data-value",ar=(r,l,d)=>er(r,l,d),Ta=s.createContext(void 0),Pe=()=>s.useContext(Ta),Ea=s.createContext(void 0),It=()=>s.useContext(Ea),Da=s.createContext(void 0),Aa=s.forwardRef((r,l)=>{let d=be(()=>{var c,u;return{search:"",value:(u=(c=r.value)!=null?c:r.defaultValue)!=null?u:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),j=be(()=>new Set),x=be(()=>new Map),i=be(()=>new Map),b=be(()=>new Set),o=Ia(r),{label:C,children:h,value:v,onValueChange:N,filter:I,shouldFilter:k,loop:$,disablePointerSelection:V=!1,vimBindings:U=!0,...R}=r,_=Ne(),y=Ne(),A=Ne(),L=s.useRef(null),D=gr();ge(()=>{if(v!==void 0){let c=v.trim();d.current.value=c,P.emit()}},[v]),ge(()=>{D(6,ze)},[]);let P=s.useMemo(()=>({subscribe:c=>(b.current.add(c),()=>b.current.delete(c)),snapshot:()=>d.current,setState:(c,u,S)=>{var p,f,E,z;if(!Object.is(d.current[c],u)){if(d.current[c]=u,c==="search")_e(),ve(),D(1,G);else if(c==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let F=document.getElementById(A);F?F.focus():(p=document.getElementById(_))==null||p.focus()}if(D(7,()=>{var F;d.current.selectedItemId=(F=q())==null?void 0:F.id,P.emit()}),S||D(5,ze),((f=o.current)==null?void 0:f.value)!==void 0){let F=u??"";(z=(E=o.current).onValueChange)==null||z.call(E,F);return}}P.emit()}},emit:()=>{b.current.forEach(c=>c())}}),[]),we=s.useMemo(()=>({value:(c,u,S)=>{var p;u!==((p=i.current.get(c))==null?void 0:p.value)&&(i.current.set(c,{value:u,keywords:S}),d.current.filtered.items.set(c,H(u,S)),D(2,()=>{ve(),P.emit()}))},item:(c,u)=>(j.current.add(c),u&&(x.current.has(u)?x.current.get(u).add(c):x.current.set(u,new Set([c]))),D(3,()=>{_e(),ve(),d.current.value||G(),P.emit()}),()=>{i.current.delete(c),j.current.delete(c),d.current.filtered.items.delete(c);let S=q();D(4,()=>{_e(),S?.getAttribute("id")===c&&G(),P.emit()})}),group:c=>(x.current.has(c)||x.current.set(c,new Set),()=>{i.current.delete(c),x.current.delete(c)}),filter:()=>o.current.shouldFilter,label:C||r["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:_,inputId:A,labelId:y,listInnerRef:L}),[]);function H(c,u){var S,p;let f=(p=(S=o.current)==null?void 0:S.filter)!=null?p:ar;return c?f(c,d.current.search,u):0}function ve(){if(!d.current.search||o.current.shouldFilter===!1)return;let c=d.current.filtered.items,u=[];d.current.filtered.groups.forEach(p=>{let f=x.current.get(p),E=0;f.forEach(z=>{let F=c.get(z);E=Math.max(F,E)}),u.push([p,E])});let S=L.current;ae().sort((p,f)=>{var E,z;let F=p.getAttribute("id"),B=f.getAttribute("id");return((E=c.get(B))!=null?E:0)-((z=c.get(F))!=null?z:0)}).forEach(p=>{let f=p.closest(_t);f?f.appendChild(p.parentElement===f?p:p.closest(`${_t} > *`)):S.appendChild(p.parentElement===S?p:p.closest(`${_t} > *`))}),u.sort((p,f)=>f[1]-p[1]).forEach(p=>{var f;let E=(f=L.current)==null?void 0:f.querySelector(`${$e}[${ye}="${encodeURIComponent(p[0])}"]`);E?.parentElement.appendChild(E)})}function G(){let c=ae().find(S=>S.getAttribute("aria-disabled")!=="true"),u=c?.getAttribute(ye);P.setState("value",u||void 0)}function _e(){var c,u,S,p;if(!d.current.search||o.current.shouldFilter===!1){d.current.filtered.count=j.current.size;return}d.current.filtered.groups=new Set;let f=0;for(let E of j.current){let z=(u=(c=i.current.get(E))==null?void 0:c.value)!=null?u:"",F=(p=(S=i.current.get(E))==null?void 0:S.keywords)!=null?p:[],B=H(z,F);d.current.filtered.items.set(E,B),B>0&&f++}for(let[E,z]of x.current)for(let F of z)if(d.current.filtered.items.get(F)>0){d.current.filtered.groups.add(E);break}d.current.filtered.count=f}function ze(){var c,u,S;let p=q();p&&(((c=p.parentElement)==null?void 0:c.firstChild)===p&&((S=(u=p.closest($e))==null?void 0:u.querySelector(tr))==null||S.scrollIntoView({block:"nearest"})),p.scrollIntoView({block:"nearest"}))}function q(){var c;return(c=L.current)==null?void 0:c.querySelector(`${Ca}[aria-selected="true"]`)}function ae(){var c;return Array.from(((c=L.current)==null?void 0:c.querySelectorAll(ba))||[])}function Q(c){let u=ae()[c];u&&P.setState("value",u.getAttribute(ye))}function W(c){var u;let S=q(),p=ae(),f=p.findIndex(z=>z===S),E=p[f+c];(u=o.current)!=null&&u.loop&&(E=f+c<0?p[p.length-1]:f+c===p.length?p[0]:p[f+c]),E&&P.setState("value",E.getAttribute(ye))}function Se(c){let u=q(),S=u?.closest($e),p;for(;S&&!p;)S=c>0?mr(S,$e):xr(S,$e),p=S?.querySelector(ba);p?P.setState("value",p.getAttribute(ye)):W(c)}let se=()=>Q(ae().length-1),Ce=c=>{c.preventDefault(),c.metaKey?se():c.altKey?Se(1):W(1)},Te=c=>{c.preventDefault(),c.metaKey?Q(0):c.altKey?Se(-1):W(-1)};return s.createElement(te.div,{ref:l,tabIndex:-1,...R,"cmdk-root":"",onKeyDown:c=>{var u;(u=R.onKeyDown)==null||u.call(R,c);let S=c.nativeEvent.isComposing||c.keyCode===229;if(!(c.defaultPrevented||S))switch(c.key){case"n":case"j":{U&&c.ctrlKey&&Ce(c);break}case"ArrowDown":{Ce(c);break}case"p":case"k":{U&&c.ctrlKey&&Te(c);break}case"ArrowUp":{Te(c);break}case"Home":{c.preventDefault(),Q(0);break}case"End":{c.preventDefault(),se();break}case"Enter":{c.preventDefault();let p=q();if(p){let f=new Event(Et);p.dispatchEvent(f)}}}}},s.createElement("label",{"cmdk-label":"",htmlFor:we.inputId,id:we.labelId,style:pr},C),et(r,c=>s.createElement(Ea.Provider,{value:P},s.createElement(Ta.Provider,{value:we},c))))}),sr=s.forwardRef((r,l)=>{var d,j;let x=Ne(),i=s.useRef(null),b=s.useContext(Da),o=Pe(),C=Ia(r),h=(j=(d=C.current)==null?void 0:d.forceMount)!=null?j:b?.forceMount;ge(()=>{if(!h)return o.item(x,b?.id)},[h]);let v=Ma(x,i,[r.value,r.children,i],r.keywords),N=It(),I=ee(D=>D.value&&D.value===v.current),k=ee(D=>h||o.filter()===!1?!0:D.search?D.filtered.items.get(x)>0:!0);s.useEffect(()=>{let D=i.current;if(!(!D||r.disabled))return D.addEventListener(Et,$),()=>D.removeEventListener(Et,$)},[k,r.onSelect,r.disabled]);function $(){var D,P;V(),(P=(D=C.current).onSelect)==null||P.call(D,v.current)}function V(){N.setState("value",v.current,!0)}if(!k)return null;let{disabled:U,value:R,onSelect:_,forceMount:y,keywords:A,...L}=r;return s.createElement(te.div,{ref:Le(i,l),...L,id:x,"cmdk-item":"",role:"option","aria-disabled":!!U,"aria-selected":!!I,"data-disabled":!!U,"data-selected":!!I,onPointerMove:U||o.getDisablePointerSelection()?void 0:V,onClick:U?void 0:$},r.children)}),rr=s.forwardRef((r,l)=>{let{heading:d,children:j,forceMount:x,...i}=r,b=Ne(),o=s.useRef(null),C=s.useRef(null),h=Ne(),v=Pe(),N=ee(k=>x||v.filter()===!1?!0:k.search?k.filtered.groups.has(b):!0);ge(()=>v.group(b),[]),Ma(b,o,[r.value,r.heading,C]);let I=s.useMemo(()=>({id:b,forceMount:x}),[x]);return s.createElement(te.div,{ref:Le(o,l),...i,"cmdk-group":"",role:"presentation",hidden:N?void 0:!0},d&&s.createElement("div",{ref:C,"cmdk-group-heading":"","aria-hidden":!0,id:h},d),et(r,k=>s.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":d?h:void 0},s.createElement(Da.Provider,{value:I},k))))}),nr=s.forwardRef((r,l)=>{let{alwaysRender:d,...j}=r,x=s.useRef(null),i=ee(b=>!b.search);return!d&&!i?null:s.createElement(te.div,{ref:Le(x,l),...j,"cmdk-separator":"",role:"separator"})}),lr=s.forwardRef((r,l)=>{let{onValueChange:d,...j}=r,x=r.value!=null,i=It(),b=ee(h=>h.search),o=ee(h=>h.selectedItemId),C=Pe();return s.useEffect(()=>{r.value!=null&&i.setState("search",r.value)},[r.value]),s.createElement(te.input,{ref:l,...j,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":C.listId,"aria-labelledby":C.labelId,"aria-activedescendant":o,id:C.inputId,type:"text",value:x?r.value:b,onChange:h=>{x||i.setState("search",h.target.value),d?.(h.target.value)}})}),ir=s.forwardRef((r,l)=>{let{children:d,label:j="Suggestions",...x}=r,i=s.useRef(null),b=s.useRef(null),o=ee(h=>h.selectedItemId),C=Pe();return s.useEffect(()=>{if(b.current&&i.current){let h=b.current,v=i.current,N,I=new ResizeObserver(()=>{N=requestAnimationFrame(()=>{let k=h.offsetHeight;v.style.setProperty("--cmdk-list-height",k.toFixed(1)+"px")})});return I.observe(h),()=>{cancelAnimationFrame(N),I.unobserve(h)}}},[]),s.createElement(te.div,{ref:Le(i,l),...x,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":j,id:C.listId},et(r,h=>s.createElement("div",{ref:Le(b,C.listInnerRef),"cmdk-list-sizer":""},h)))}),or=s.forwardRef((r,l)=>{let{open:d,onOpenChange:j,overlayClassName:x,contentClassName:i,container:b,...o}=r;return s.createElement(us,{open:d,onOpenChange:j},s.createElement(ps,{container:b},s.createElement(hs,{"cmdk-overlay":"",className:x}),s.createElement(fs,{"aria-label":r.label,"cmdk-dialog":"",className:i},s.createElement(Aa,{ref:l,...o}))))}),dr=s.forwardRef((r,l)=>ee(d=>d.filtered.count===0)?s.createElement(te.div,{ref:l,...r,"cmdk-empty":"",role:"presentation"}):null),cr=s.forwardRef((r,l)=>{let{progress:d,children:j,label:x="Loading...",...i}=r;return s.createElement(te.div,{ref:l,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":d,"aria-valuemin":0,"aria-valuemax":100,"aria-label":x},et(r,b=>s.createElement("div",{"aria-hidden":!0},b)))}),ke=Object.assign(Aa,{List:ir,Item:sr,Input:lr,Group:rr,Separator:nr,Dialog:or,Empty:dr,Loading:cr});function mr(r,l){let d=r.nextElementSibling;for(;d;){if(d.matches(l))return d;d=d.nextElementSibling}}function xr(r,l){let d=r.previousElementSibling;for(;d;){if(d.matches(l))return d;d=d.previousElementSibling}}function Ia(r){let l=s.useRef(r);return ge(()=>{l.current=r}),l}var ge=typeof window>"u"?s.useEffect:s.useLayoutEffect;function be(r){let l=s.useRef();return l.current===void 0&&(l.current=r()),l}function ee(r){let l=It(),d=()=>r(l.snapshot());return s.useSyncExternalStore(l.subscribe,d,d)}function Ma(r,l,d,j=[]){let x=s.useRef(),i=Pe();return ge(()=>{var b;let o=(()=>{var h;for(let v of d){if(typeof v=="string")return v.trim();if(typeof v=="object"&&"current"in v)return v.current?(h=v.current.textContent)==null?void 0:h.trim():x.current}})(),C=j.map(h=>h.trim());i.value(r,o,C),(b=l.current)==null||b.setAttribute(ye,o),x.current=o}),x}var gr=()=>{let[r,l]=s.useState(),d=be(()=>new Map);return ge(()=>{d.current.forEach(j=>j()),d.current=new Map},[r]),(j,x)=>{d.current.set(j,x),l({})}};function ur(r){let l=r.type;return typeof l=="function"?l(r.props):"render"in l?l.render(r.props):r}function et({asChild:r,children:l},d){return r&&s.isValidElement(l)?s.cloneElement(ur(l),{ref:l.ref},d(l.props.children)):d(l)}var pr={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function hr({className:r,...l}){return e.jsx(ke,{"data-slot":"command",className:Re("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",r),...l})}function fr({className:r,...l}){return e.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[e.jsx(Ms,{className:"size-4 shrink-0 opacity-50"}),e.jsx(ke.Input,{"data-slot":"command-input",className:Re("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",r),...l})]})}function yr({className:r,...l}){return e.jsx(ke.List,{"data-slot":"command-list",className:Re("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",r),...l})}function br({...r}){return e.jsx(ke.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...r})}function jr({className:r,...l}){return e.jsx(ke.Group,{"data-slot":"command-group",className:Re("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",r),...l})}function Nr({className:r,...l}){return e.jsx(ke.Item,{"data-slot":"command-item",className:Re("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",r),...l})}function kr({jobId:r,mergeStatus:l,mergeError:d,className:j}){const{getAuthHeaders:x}=Dt(),[i,b]=s.useState(l||"none"),[o,C]=s.useState(d);if(s.useEffect(()=>{if(i==="processing"||i==="pending"){const I=setInterval(async()=>{try{const k=await fetch(`/api/v1/transcription/${r}/merge-status`,{headers:x()});if(k.ok){const $=await k.json();b($.merge_status),C($.merge_error),($.merge_status==="completed"||$.merge_status==="failed")&&clearInterval(I)}}catch(k){console.error("Failed to fetch merge status:",k)}},2e3);return()=>clearInterval(I)}},[i,r,x]),i==="none")return null;const v=(()=>{switch(i){case"pending":return{icon:Ct,text:"Merging pending",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300"};case"processing":return{icon:Ze,text:"Merging...",className:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",animate:!0};case"completed":return{icon:Ls,text:"Merged",className:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"};case"failed":return{icon:$s,text:"Merge failed",className:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"};default:return null}})();if(!v)return null;const N=v.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-md ${v.className} ${j||""}`,title:o||void 0,children:[e.jsx(N,{className:`h-3 w-3 ${v.animate?"animate-spin":""}`}),v.text]})}const wr=r=>{switch(r){case"pyannote":return"PyAnnote Speaker Diarization 3.1";case"nvidia_sortformer":return"NVIDIA Sortformer 4-Speaker v2";default:return r||"Unknown"}},ja=r=>r?r.word_segments&&r.word_segments.length>0?r.word_segments[r.word_segments.length-1].end:r.segments&&r.segments.length>0?r.segments[r.segments.length-1].end:null:null,Na=r=>{if(r<60)return`${r.toFixed(1)}s`;const l=Math.floor(r/60),d=r%60;if(l<60)return`${l}m ${d.toFixed(0)}s`;const j=Math.floor(l/60),x=l%60;return`${j}h ${x}m ${d.toFixed(0)}s`},vr=r=>{const l=Math.floor(r/60),d=r%60;return`${l}:${d.toString().padStart(2,"0")}`},$r=s.memo(function({audioId:l}){const{navigate:d}=_s(),{theme:j}=Ss(),{getAuthHeaders:x}=Dt(),[i,b]=s.useState(null),[o,C]=s.useState(null);s.useEffect(()=>{console.log("[DEBUG] *** TRANSCRIPT STATE CHANGED ***"),console.log("[DEBUG] transcript:",o),console.log("[DEBUG] has word_segments:",!!o?.word_segments),console.log("[DEBUG] word_segments length:",o?.word_segments?.length),console.log("[DEBUG] transcript.text length:",o?.text?.length)},[o]);const[h,v]=s.useState(!0),[N,I]=s.useState(!1),[k,$]=s.useState("compact"),[V,U]=s.useState("transcript"),[R,_]=s.useState(0),[y,A]=s.useState(null),[L,D]=s.useState(!1),[P,we]=s.useState("txt"),[H,ve]=s.useState(!0),[G,_e]=s.useState(!0),[ze,q]=s.useState(!1),[ae,Q]=s.useState({}),[W,Se]=s.useState(null),[se,Ce]=s.useState(null),[Te,c]=s.useState(0),[u,S]=s.useState(null),p=s.useRef(null),f=s.useRef(null),E=s.useRef(null),z=s.useRef(null),F=s.useRef(null),[B,Fe]=s.useState([]),Mt=t=>[...t].sort((a,m)=>a.start_time!==m.start_time?a.start_time-m.start_time:a.start_word_index!==m.start_word_index?a.start_word_index-m.start_word_index:(a.created_at||"").localeCompare(m.created_at||"")),[tt,at]=s.useState(!1),[st,re]=s.useState(!1),[J,Ee]=s.useState(null),[$t,Lt]=s.useState(""),[De,Oe]=s.useState(!1),[$a,Ae]=s.useState(!1),[ue,Rt]=s.useState([]),[rt,Be]=s.useState(!1),[nt,Pt]=s.useState(""),ne=ue.find(t=>t.id===nt),[La,lt]=s.useState(!1),[Ra,it]=s.useState(!1),[le,Ue]=s.useState(""),[ot,dt]=s.useState(!1),[ct,Ve]=s.useState(null),[Ie,mt]=s.useState(null),[Ge,Pa]=s.useState({x:0,y:0}),{toast:ie}=Cs(),[za,Me]=s.useState(!1),[zt,Ft]=s.useState(""),[Fa,Ot]=s.useState(!1),[Z,Bt]=s.useState(!1),[Oa,Ut]=s.useState(!1),[n,Ba]=s.useState(null),[Ua,Vt]=s.useState(!1),[Gt,xt]=s.useState(!1),[gt,ut]=s.useState(null),[Wt,Yt]=s.useState(!1);s.useEffect(()=>{try{const t=`scriberr.audioCollapsed.${l}`,a=localStorage.getItem(t);a!==null&&Bt(a==="1")}catch{}},[l]),s.useEffect(()=>{try{const t=`scriberr.audioCollapsed.${l}`;localStorage.setItem(t,Z?"1":"0")}catch{}},[l,Z]),s.useEffect(()=>{Wa(),Ya(),(async()=>{try{const t=await fetch("/api/v1/llm/config",{headers:{...x()}});if(t.ok){const a=await t.json();mt(!!a&&a.is_active)}else mt(!1)}catch{mt(!1)}})()},[l]),s.useEffect(()=>{const t=u||i?.status;if(i&&t&&(t==="processing"||t==="pending")){!se&&t==="processing"&&Ce(new Date),W&&clearInterval(W);const a=setInterval(async()=>{await Ga()},3e3);return Se(a),()=>{a&&clearInterval(a)}}else{W&&(clearInterval(W),Se(null));const a=u||i?.status;a&&(a==="completed"||a==="failed")&&(Ce(null),c(0))}},[u,i?.status,l]),s.useEffect(()=>{const t=u||i?.status;if(se&&t==="processing"){const a=setInterval(()=>{const g=Math.floor((new Date().getTime()-se.getTime())/1e3);c(g)},1e3);return()=>clearInterval(a)}},[se,u,i?.status]),s.useEffect(()=>()=>{W&&clearInterval(W)},[W]),s.useEffect(()=>{i&&(Q({}),aa())},[i?.id]),s.useEffect(()=>{o&&i&&(Q({}),aa())},[o]);const Ht=s.useCallback(async()=>{if(!(!p.current||!i))try{const t=`/api/v1/transcription/${l}/audio`,a=await fetch(t,{headers:{...x()}});if(!a.ok){console.error("Audio file request failed:",a.status,a.statusText);const M=await a.text();console.error("Error response body:",M);return}const g=j==="dark"?"#4b5563":"#d1d5db",w="#3b82f6";f.current=bs.create({container:p.current,waveColor:g,progressColor:w,barWidth:2,barGap:1,barRadius:2,height:80,normalize:!0,backend:"WebAudio"});const T=await a.blob(),O=URL.createObjectURL(T);await f.current.load(O),f.current.on("error",M=>{console.error("WaveSurfer error:",M)}),f.current.on("play",()=>{I(!0)}),f.current.on("pause",()=>{I(!1)}),f.current.on("finish",()=>{I(!1),A(null)}),f.current.on("audioprocess",M=>{_(M)}),f.current.on("ready",()=>{f.current?.on("interaction",()=>{const M=f.current?.getCurrentTime()||0;_(M)})})}catch(t){console.error("Failed to initialize WaveSurfer:",t)}},[l,i,j,x]);s.useEffect(()=>{if(!i)return;const t=()=>{p.current&&!f.current?Ht():p.current||setTimeout(t,200)},a=setTimeout(t,50);return()=>{clearTimeout(a),f.current&&(f.current.destroy(),f.current=null)}},[i?.id,i?.audio_path,Ht]),s.useEffect(()=>{if(!o?.word_segments)return;const t=o.word_segments.findIndex(g=>R>=g.start&&R<=g.end),a=t===-1?o.word_segments.findIndex(g=>g.start>R)-1:t,m=Math.max(0,a);m!==y&&(N||R>0)&&A(m),!N&&R===0&&A(null)},[R,o?.word_segments,N]),s.useEffect(()=>{if(y!==null&&z.current){const t=z.current,a=t.getBoundingClientRect(),m=window.innerHeight,g=m*.2,w=a.top<g,T=a.bottom>m-g;(w||T)&&t.scrollIntoView({behavior:"smooth",block:"center"})}},[y]);const Va=async()=>{console.log("[DEBUG] *** fetchTranscriptOnly CALLED ***");try{const t=await fetch(`/api/v1/transcription/${l}/transcript`,{headers:{...x()}});if(t.ok){const a=await t.json();console.log("[DEBUG] fetchTranscriptOnly - transcriptData:",a),a.transcript&&(console.log("[DEBUG] transcript has word_segments:",!!a.transcript.word_segments),console.log("[DEBUG] word_segments length:",a.transcript.word_segments?.length),typeof a.transcript=="string"?(console.log("[DEBUG] Setting transcript as STRING"),C({text:a.transcript})):a.transcript.text?(console.log("[DEBUG] Setting transcript with TEXT and word_segments"),C({text:a.transcript.text,segments:a.transcript.segments,word_segments:a.transcript.word_segments})):a.transcript.segments&&(console.log("[DEBUG] Setting transcript with SEGMENTS and word_segments"),C({text:"",segments:a.transcript.segments,word_segments:a.transcript.word_segments})))}}catch(t){console.error("Error fetching transcript:",t)}},Ga=async()=>{try{const t=await fetch(`/api/v1/transcription/${l}`,{headers:{...x()}});if(t.ok){const a=await t.json(),m=u||i?.status;S(a.status),a.status==="completed"&&m==="processing"&&(b(g=>g?{...g,status:"completed"}:null),await Va())}}catch(t){console.error("Error fetching status:",t)}},Wa=async()=>{try{const t=await fetch(`/api/v1/transcription/${l}`,{headers:{...x()}});if(t.ok){const a=await t.json();if(b(a),S(a.status),a.status==="completed"){const m=await fetch(`/api/v1/transcription/${l}/transcript`,{headers:{...x()}});if(m.ok){const g=await m.json();if(console.log("[DEBUG] *** fetchAudioDetails TRANSCRIPT LOADING ***"),console.log("[DEBUG] initial transcriptData:",g),g.transcript){if(console.log("[DEBUG] initial transcript has word_segments:",!!g.transcript.word_segments),console.log("[DEBUG] initial word_segments length:",g.transcript.word_segments?.length),typeof g.transcript=="string")console.log("[DEBUG] INITIAL: Setting transcript as STRING"),C({text:g.transcript});else if(g.transcript.text)console.log("[DEBUG] INITIAL: Setting transcript with TEXT and word_segments"),C({text:g.transcript.text,segments:g.transcript.segments,word_segments:g.transcript.word_segments});else if(g.transcript.segments){console.log("[DEBUG] INITIAL: Setting transcript with SEGMENTS only");const w=g.transcript.segments.map(T=>T.text).join(" ");C({text:w,segments:g.transcript.segments,word_segments:g.transcript.word_segments})}}}else console.error("Failed to fetch transcript:",m.status)}}else console.error("Failed to fetch audio details:",t.status)}catch(t){console.error("Failed to fetch audio details:",t)}finally{v(!1)}},Ya=async()=>{try{const t=await fetch(`/api/v1/transcription/${l}/notes`,{headers:{...x()}});if(t.ok){const a=await t.json();Fe(Mt(a))}}catch(t){console.error("Failed to fetch notes",t)}},Ha=async()=>{if(!n){Vt(!0);try{const t=await fetch(`/api/v1/transcription/${l}/execution`,{headers:{...x()}});if(t.ok){const a=await t.json();Ba(a)}}catch(t){console.error("Failed to fetch execution data",t)}finally{Vt(!1)}}},qa=async()=>{if(!gt){Yt(!0);try{const t=await fetch(`/api/v1/transcription/${l}/logs`,{headers:{...x()}});if(t.ok){const a=await t.text();ut(a)}else ut("Failed to load logs.")}catch(t){console.error("Failed to fetch logs",t),ut("Error loading logs.")}finally{Yt(!1)}}},qt=()=>{xt(!0),qa()},Jt=()=>{Ut(!0),Ha()},Kt=()=>{f.current&&f.current.playPause()},Xt=()=>{d({path:"home"})};s.useEffect(()=>{const t=E.current;if(!t)return;const a=()=>{const m=window.getSelection();if(!m||m.isCollapsed){re(!1),Oe(!1);return}const g=m.anchorNode,w=m.focusNode;if(!g||!w)return;const T=g.nodeType===3?g.parentElement:g,O=w.nodeType===3?w.parentElement:w;if(!T||!O)return;const M=T.closest("span[data-word-index]"),oe=O.closest("span[data-word-index]");if(!M||!oe){re(!1);return}const K=Math.min(Number(M.dataset.wordIndex),Number(oe.dataset.wordIndex)),X=Math.max(Number(M.dataset.wordIndex),Number(oe.dataset.wordIndex));if(!o?.word_segments||X<K){re(!1);return}const Ke=o.word_segments[K]?.start??0,ds=o.word_segments[X]?.end??Ke,cs=o.word_segments.slice(K,X+1).map(gs=>gs.word).join(" "),Xe=m.getRangeAt(0).getBoundingClientRect(),ms=Xe.left+Xe.width/2,xs=Math.min(window.innerWidth-16,Math.max(16,ms));let yt=Xe.top-10;yt<12&&(yt=Xe.bottom+8),Pa({x:xs,y:yt}),Ee({startIdx:K,endIdx:X,startTime:Ke,endTime:ds,quote:cs}),re(!0)};return t.addEventListener("mouseup",a),()=>t.removeEventListener("mouseup",a)},[o,k]),s.useEffect(()=>{const t=E.current;if(!t)return;const a=m=>{if(!(m.metaKey||m.ctrlKey))return;const g=m.target;if(!g)return;const w=g.closest("span[data-word-index]");if(!w)return;const T=w.getAttribute("data-start"),O=T?parseFloat(T):NaN;if(isNaN(O))return;m.preventDefault(),m.stopPropagation();const M=f.current;if(M){const oe=M.getDuration()||1,K=Math.min(.999,Math.max(0,O/oe));M.seekTo(K),_(O)}};return t.addEventListener("click",a),()=>t.removeEventListener("click",a)},[o,k]),s.useEffect(()=>{const t=()=>{if(De)return;const a=window.getSelection();(!a||a.isCollapsed)&&(re(!1),Ee(null))};return document.addEventListener("selectionchange",t),()=>document.removeEventListener("selectionchange",t)},[De]);const Ja=()=>{Oe(!0),re(!1),Lt("")},Ka=async()=>{if(J)try{const t=await fetch(`/api/v1/transcription/${l}/notes`,{method:"POST",headers:{"Content-Type":"application/json",...x()},body:JSON.stringify({start_word_index:J.startIdx,end_word_index:J.endIdx,start_time:J.startTime,end_time:J.endTime,quote:J.quote,content:$t.trim()||J.quote})});if(t.ok){const a=await t.json();Fe(g=>Mt([...g||[],a])),Oe(!1),Ee(null),window.getSelection()?.removeAllRanges()}}catch(t){console.error("Failed to create note",t)}},Xa=async(t,a)=>{await fetch(`/api/v1/notes/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",...x()},body:JSON.stringify({content:a})}),Fe(m=>m.map(g=>g.id===t?{...g,content:a}:g))},Qa=async t=>{await fetch(`/api/v1/notes/${t}`,{method:"DELETE",headers:{...x()}}),Fe(a=>a.filter(m=>m.id!==t))},Za=()=>(console.log("[DEBUG] renderHighlightedTranscript - transcript:",o),console.log("[DEBUG] has word_segments:",!!o?.word_segments),console.log("[DEBUG] word_segments length:",o?.word_segments?.length),!o?.word_segments||o.word_segments.length===0?(console.log("[DEBUG] No word_segments, returning plain text:",o?.text?.substring(0,100)+"..."),o?.text||""):o.word_segments.map((t,a)=>{const m=a===y,g=B.some(w=>a>=w.start_word_index&&a<=w.end_word_index);return e.jsxs("span",{ref:m?z:void 0,"data-word-index":a,"data-word":t.word,"data-start":t.start,"data-end":t.end,className:`cursor-text transition-colors duration-150 hover:bg-blue-100 dark:hover:bg-blue-800 inline ${m?"bg-yellow-300 dark:bg-yellow-500 dark:text-black px-1 rounded":g?"bg-amber-100/70 dark:bg-amber-800/40 px-0.5 rounded":"px-0.5"}`,children:[t.word," "]},a)})),es=t=>{if(!o?.word_segments)return t.text.trim();const a=o.word_segments.filter(m=>m.start>=t.start&&m.end<=t.end);return a.length===0?t.text.trim():a.map((m,g)=>{const w=o.word_segments?.findIndex(M=>M===m)??-1,T=w===y,O=B.some(M=>w>=M.start_word_index&&w<=M.end_word_index);return e.jsxs("span",{ref:T?z:void 0,"data-word-index":w,"data-word":m.word,"data-start":m.start,"data-end":m.end,className:`cursor-text transition-colors duration-150 hover:bg-blue-100 dark:hover:bg-blue-800 inline ${T?"bg-yellow-300 dark:bg-yellow-500 dark:text-black px-1 rounded":O?"bg-amber-100/70 dark:bg-amber-800/40 px-0.5 rounded":"px-0.5"}`,children:[m.word," "]},g)})},We=t=>{const a=t.split("/");return a[a.length-1]},ts=()=>o?o.segments&&o.segments.length>0?o.segments.map(t=>t.text.trim()).join(`
`):o.text||"":"",as=()=>{if(!Z&&f.current&&N)try{f.current.pause()}catch{}Bt(t=>!t)},Qt=async()=>{if(!i){Me(!1);return}const t=i.title||We(i.audio_path),a=zt.trim();if(!a||a===t){Me(!1);return}Ot(!0);try{const m=await fetch(`/api/v1/transcription/${i.id}/title`,{method:"PUT",headers:{"Content-Type":"application/json",...x()},body:JSON.stringify({title:a})});if(m.ok){const g=await m.json();b(w=>w&&{...w,title:g.title}),ie({title:"Title updated"})}else{const g=await m.text();ie({title:"Failed to update title",description:g})}}catch{ie({title:"Failed to update title"})}finally{Ot(!1),Me(!1)}},Zt=async()=>{if(Ie!==!1){try{const t=await fetch(`/api/v1/transcription/${l}/summary`,{headers:{...x()}});if(t.ok){const a=await t.json();Ue(a.content||""),it(!0);return}}catch{}if(Ae(!0),ue.length===0)try{Be(!0);const t=await fetch("/api/v1/summaries",{headers:{...x()}});if(t.ok){const a=await t.json();Rt(a||[])}}finally{Be(!1)}}},ss=async()=>{const t=ue.find(g=>g.id===nt);if(!t)return;const m=`Transcript:
${ts()}

Instructions:
${t.prompt}`;it(!0),Ue(""),Ve(null),dt(!0);try{const g=await fetch("/api/v1/summarize",{method:"POST",headers:{"Content-Type":"application/json",...x()},body:JSON.stringify({model:t.model,content:m,transcription_id:l,template_id:t.id})});if(!g.body){dt(!1),Ve("Failed to start summary stream."),ie({title:"Summary failed",description:"Failed to start summary stream."});return}const w=g.body.getReader(),T=new TextDecoder;let O=!1;for(;;){const{done:M,value:oe}=await w.read();if(M){const X=T.decode();X&&(Ue(Ke=>Ke+X),O=!0);break}const K=T.decode(oe,{stream:!0});K&&(Ue(X=>X+K),O=!0)}O||(Ve("No content returned by the model."),ie({title:"Summary failed",description:"No content returned by the model."}))}catch{Ve("Summary generation failed. Please try again."),ie({title:"Summary failed",description:"Summary generation failed. Please try again."})}finally{dt(!1)}},pt=t=>{const a=Math.floor(t/60),m=Math.floor(t%60);return`${a}:${m.toString().padStart(2,"0")}`},rs=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),ea=()=>{if(!o)return;let t="",a=1;o.segments?o.segments.forEach(m=>{const g=ta(m.start),w=ta(m.end);let T=m.text.trim();m.speaker&&(T=`${Je(m.speaker)}: ${T}`),t+=`${a}
${g} --> ${w}
${T}

`,a++}):t=`1
00:00:00,000 --> 99:59:59,999
${o.text}

`,Ye(t,`${He()}.srt`,"text/plain")},ns=()=>{if(!o)return;let t="";!H&&!G?t=o.text:o.segments?o.segments.forEach((a,m)=>{m>0&&(t+=`

`),G&&(t+=`[${pt(a.start)}] `),H&&a.speaker&&(t+=`${Je(a.speaker)}: `),t+=a.text.trim()}):t=o.text,Ye(t,`${He()}.txt`,"text/plain")},ls=()=>{if(!o)return;let t;!H&&!G?t={text:o.text,format:"simple"}:o.segments?t={text:o.text,format:"segmented",segments:o.segments.map(a=>{const m={text:a.text.trim()};return G&&(m.start=a.start,m.end=a.end,m.timestamp=pt(a.start)),H&&a.speaker&&(m.speaker=Je(a.speaker)),m})}:t={text:o.text,format:"simple"},Ye(JSON.stringify(t,null,2),`${He()}.json`,"application/json")},ta=t=>{const a=Math.floor(t/3600),m=Math.floor(t%3600/60),g=Math.floor(t%60),w=Math.floor(t%1*1e3);return`${a.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")},${w.toString().padStart(3,"0")}`},Ye=(t,a,m)=>{const g=new Blob([t],{type:m}),w=URL.createObjectURL(g),T=document.createElement("a");T.href=w,T.download=a,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(w)},He=()=>(i?.title||We(i?.audio_path||"")).replace(/\.[^/.]+$/,"")||"transcript",qe=t=>{we(t),D(!0)},is=()=>{P==="txt"?ns():ls(),D(!1)},ht=()=>{if(!o?.segments)return[];const t=new Set;return o.segments.forEach(a=>{a.speaker&&t.add(a.speaker)}),Array.from(t).sort()},ft=()=>i?.diarization||i?.parameters?.diarize||i?.is_multi_track||!1,os=t=>{const a={};t.forEach(m=>{a[m.original_speaker]=m.custom_name}),Q(a)},Je=t=>ae[t]||t,aa=async()=>{if(!(!i||!ft()))try{const t=await fetch(`/api/v1/transcription/${l}/speakers`,{headers:{...x()}});if(t.ok){const a=await t.json(),m={};a.forEach(g=>{m[g.original_speaker]=g.custom_name}),Q(m)}}catch(t){console.error("Error fetching speaker mappings:",t)}};return h?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"mx-auto w-full max-w-6xl px-2 sm:px-6 md:px-8 py-3 sm:py-6",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-3 sm:p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-600 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-1/2 mb-8"}),e.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-600 rounded mb-8"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((t,a)=>e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded"},a))})]})})})}):i?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"mx-auto w-full max-w-6xl px-2 sm:px-6 md:px-8 py-3 sm:py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-6",children:[e.jsxs(Y,{onClick:Xt,variant:"outline",size:"sm",className:"cursor-pointer",children:[e.jsx(oa,{className:"mr-2 h-4 w-4"}),"Back to Audio Files"]}),e.jsx(Ts,{})]}),e.jsxs("div",{ref:F,className:`bg-white dark:bg-gray-800 rounded-xl ${Z?"p-3 sm:p-4":"p-3 sm:p-6"} mb-3 sm:mb-6`,children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2 justify-between",children:[za?e.jsx("input",{autoFocus:!0,className:"w-full max-w-xl text-2xl font-bold bg-transparent border-b border-blue-400 focus:outline-none focus:ring-0 dark:text-gray-50 text-gray-900",value:zt,disabled:Fa,onChange:t=>Ft(t.target.value),onBlur:async()=>{await Qt()},onKeyDown:async t=>{t.key==="Enter"&&(t.preventDefault(),await Qt()),t.key==="Escape"&&Me(!1)}}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-50",children:i.title||We(i.audio_path)}),i.is_multi_track&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 text-xs font-medium rounded-md",children:[e.jsx(je,{className:"h-3 w-3"}),"Multi-Track (",i.multi_track_files?.length||0," speakers)"]}),e.jsx(kr,{jobId:i.id,mergeStatus:i.merge_status,mergeError:i.merge_error})]}),e.jsx("button",{className:"h-7 w-7 inline-flex items-center justify-center rounded-md cursor-pointer text-gray-500 hover:text-gray-700 hover:bg-gray-200/60 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:bg-gray-700/60 transition-colors","aria-label":"Edit title",title:"Edit title",onClick:()=>{const t=i.title||We(i.audio_path);Ft(t),Me(!0)},children:e.jsx(_a,{className:"h-4 w-4"})})]}),e.jsx("button",{className:"h-7 w-7 inline-flex items-center justify-center rounded-md cursor-pointer text-gray-500 hover:text-gray-700 hover:bg-gray-200/60 dark:text-gray-400 dark:hover:text-gray-200 dark:hover:bg-gray-700/60 transition-colors","aria-label":Z?"Expand audio":"Collapse audio",title:Z?"Expand audio":"Collapse audio",onClick:as,children:Z?e.jsx(Rs,{className:"h-4 w-4"}):e.jsx(Ps,{className:"h-4 w-4"})})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:["Added on ",rs(i.created_at)]})]}),e.jsx("div",{className:`mb-6 ${Z?"hidden":""}`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:Kt,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-blue-500 hover:bg-blue-600 text-white shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 flex items-center justify-center group cursor-pointer",children:N?e.jsx(da,{className:"h-5 w-5 sm:h-6 sm:w-6 group-hover:scale-110 transition-transform"}):e.jsx(ca,{className:"h-5 w-5 sm:h-6 sm:w-6 ml-0.5 group-hover:scale-110 transition-transform"})}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{ref:p,className:"w-full bg-gray-50 dark:bg-gray-700 rounded-lg p-2 sm:p-4",style:{minHeight:"80px"}})})]})})]}),(u||i.status)==="completed"&&o&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-3 sm:p-6",children:[e.jsxs("div",{className:"mb-3 sm:mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-0",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 dark:text-gray-50",children:V==="transcript"?"Transcript":"Chat with Transcript"}),e.jsx("div",{className:"hidden sm:flex items-center gap-2",children:V==="transcript"&&e.jsxs("div",{className:"flex items-center gap-1 sm:gap-1.5 rounded-md sm:rounded-lg bg-gray-100/80 dark:bg-gray-800/80 px-1.5 py-0.5 sm:px-2 sm:py-1 border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsx("button",{type:"button",onClick:()=>$(t=>t==="compact"?"expanded":"compact"),className:`h-6 w-6 sm:h-7 sm:w-7 inline-flex items-center justify-center rounded-md cursor-pointer text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors ${k==="compact"?"bg-white dark:bg-gray-700 shadow-sm":""}`,title:k==="compact"?"Switch to Timeline view":"Switch to Compact view",children:k==="compact"?e.jsx(ma,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):e.jsx(xa,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}),e.jsx("div",{className:"mx-1 h-5 w-px bg-gray-300 dark:bg-gray-700"}),e.jsxs("button",{type:"button",onClick:()=>at(t=>!t),className:`relative h-6 w-6 sm:h-7 sm:w-7 inline-flex items-center justify-center rounded-md cursor-pointer text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors ${tt?"bg-white dark:bg-gray-700 shadow-sm":""}`,title:"Toggle notes",children:[e.jsx(bt,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}),B.length>0&&e.jsx("span",{className:"absolute -top-1 -right-0.5 min-w-[15px] h-[15px] px-1 rounded-full bg-blue-600 text-white text-[10px] leading-[15px] text-center",children:B.length>99?"99+":B.length})]}),e.jsx("div",{className:"mx-1 h-5 w-px bg-gray-300 dark:bg-gray-700"}),e.jsx("button",{type:"button",onClick:Jt,className:"h-6 w-6 sm:h-7 sm:w-7 inline-flex items-center justify-center rounded-md cursor-pointer text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",title:"View execution parameters and timing",children:e.jsx(jt,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}),e.jsx("div",{className:"mx-1 h-5 w-px bg-gray-300 dark:bg-gray-700"}),e.jsx("button",{type:"button",onClick:qt,className:"h-6 w-6 sm:h-7 sm:w-7 inline-flex items-center justify-center rounded-md cursor-pointer text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",title:"View transcription logs",children:e.jsx(fe,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}),ft()&&ht().length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-1 h-5 w-px bg-gray-300 dark:bg-gray-700"}),e.jsx("button",{type:"button",onClick:()=>q(!0),className:"h-6 w-6 sm:h-7 sm:w-7 inline-flex items-center justify-center rounded-md cursor-pointer text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",title:"Rename speakers",children:e.jsx(je,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})]}),e.jsx("div",{className:"mx-1 h-5 w-px bg-gray-300 dark:bg-gray-700"}),e.jsx("button",{type:"button",onClick:Zt,className:"h-6 w-6 sm:h-7 sm:w-7 inline-flex items-center justify-center rounded-md cursor-pointer text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",title:Ie===!1?"Configure LLM in Settings":"Summarize transcript",disabled:Ie===!1,children:e.jsx(ga,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}),e.jsx("div",{className:"mx-1 h-5 w-px bg-gray-300 dark:bg-gray-700"}),e.jsxs(ra,{children:[e.jsx(na,{asChild:!0,children:e.jsx("button",{type:"button",className:"h-6 w-6 sm:h-7 sm:w-7 inline-flex items-center justify-center rounded-md cursor-pointer text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",title:"Download transcript",children:e.jsx(Nt,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})}),e.jsxs(la,{className:"w-44 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[e.jsxs(pe,{onClick:ea,className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx(ua,{className:"h-4 w-4"}),"Download as SRT"]}),e.jsxs(pe,{onClick:()=>qe("txt"),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx(fe,{className:"h-4 w-4"}),"Download as TXT"]}),e.jsxs(pe,{onClick:()=>qe("json"),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx(pa,{className:"h-4 w-4"}),"Download as JSON"]})]})]}),e.jsx("div",{className:"mx-1 h-5 w-px bg-gray-300 dark:bg-gray-700"}),e.jsx("button",{type:"button",onClick:()=>d({path:"chat",params:{audioId:l}}),className:"h-7 w-7 inline-flex items-center justify-center rounded-md cursor-pointer text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",title:"Open chat",children:e.jsx(ha,{className:"h-4 w-4"})})]})})]}),V==="transcript"&&e.jsx("div",{className:"flex sm:hidden justify-center",children:e.jsxs("div",{className:"flex items-center gap-1 rounded-md bg-gray-100/80 dark:bg-gray-800/80 px-1.5 py-0.5 border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsx("button",{type:"button",onClick:()=>$(t=>t==="compact"?"expanded":"compact"),className:`h-6 w-6 inline-flex items-center justify-center rounded-md cursor-pointer text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors ${k==="compact"?"bg-white dark:bg-gray-700 shadow-sm":""}`,title:k==="compact"?"Switch to Timeline view":"Switch to Compact view",children:k==="compact"?e.jsx(ma,{className:"h-3.5 w-3.5"}):e.jsx(xa,{className:"h-3.5 w-3.5"})}),e.jsx("div",{className:"mx-1 h-5 w-px bg-gray-300 dark:bg-gray-700"}),e.jsxs("button",{type:"button",onClick:()=>at(t=>!t),className:`relative h-6 w-6 inline-flex items-center justify-center rounded-md cursor-pointer text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors ${tt?"bg-white dark:bg-gray-700 shadow-sm":""}`,title:"Toggle notes",children:[e.jsx(bt,{className:"h-3.5 w-3.5"}),B.length>0&&e.jsx("span",{className:"absolute -top-1 -right-0.5 min-w-[15px] h-[15px] px-1 rounded-full bg-blue-600 text-white text-[10px] leading-[15px] text-center",children:B.length>99?"99+":B.length})]}),e.jsx("div",{className:"mx-1 h-5 w-px bg-gray-300 dark:bg-gray-700"}),e.jsx("button",{type:"button",onClick:Jt,className:"h-6 w-6 inline-flex items-center justify-center rounded-md cursor-pointer text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",title:"View execution parameters and timing",children:e.jsx(jt,{className:"h-3.5 w-3.5"})}),ft()&&ht().length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-1 h-5 w-px bg-gray-300 dark:bg-gray-700"}),e.jsx("button",{type:"button",onClick:()=>q(!0),className:"h-6 w-6 inline-flex items-center justify-center rounded-md cursor-pointer text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",title:"Rename speakers",children:e.jsx(je,{className:"h-3.5 w-3.5"})})]}),e.jsx("div",{className:"mx-1 h-5 w-px bg-gray-300 dark:bg-gray-700"}),e.jsx("button",{type:"button",onClick:Zt,className:"h-6 w-6 inline-flex items-center justify-center rounded-md cursor-pointer text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",title:Ie===!1?"Configure LLM in Settings":"Summarize transcript",disabled:Ie===!1,children:e.jsx(ga,{className:"h-3.5 w-3.5"})}),e.jsx("div",{className:"mx-1 h-5 w-px bg-gray-300 dark:bg-gray-700"}),e.jsxs(ra,{children:[e.jsx(na,{asChild:!0,children:e.jsx("button",{type:"button",className:"h-6 w-6 inline-flex items-center justify-center rounded-md cursor-pointer text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",title:"Download transcript",children:e.jsx(Nt,{className:"h-3.5 w-3.5"})})}),e.jsxs(la,{className:"w-44 bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[e.jsxs(pe,{onClick:ea,className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx(ua,{className:"h-4 w-4"}),"Download as SRT"]}),e.jsxs(pe,{onClick:()=>qe("txt"),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx(fe,{className:"h-4 w-4"}),"Download as TXT"]}),e.jsxs(pe,{onClick:()=>qe("json"),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx(pa,{className:"h-4 w-4"}),"Download as JSON"]})]})]}),e.jsx("div",{className:"mx-1 h-5 w-px bg-gray-300 dark:bg-gray-700"}),e.jsx("button",{type:"button",onClick:()=>d({path:"chat",params:{audioId:l}}),className:"h-6 w-6 inline-flex items-center justify-center rounded-md cursor-pointer text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",title:"Open chat",children:e.jsx(ha,{className:"h-3.5 w-3.5"})})]})})]}),V==="transcript"?e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:`transition-all duration-300 ease-in-out ${k==="compact"?"opacity-100 translate-y-0":"opacity-0 -translate-y-4 absolute inset-0 pointer-events-none"}`,children:k==="compact"&&e.jsx("div",{ref:E,className:"prose prose-gray dark:prose-invert max-w-none relative select-text cursor-text",children:e.jsx("div",{className:"text-gray-700 dark:text-gray-300 leading-relaxed break-words select-text",children:Za()})})}),e.jsx("div",{className:`transition-all duration-300 ease-in-out ${k==="expanded"?"opacity-100 translate-y-0":"opacity-0 translate-y-4 absolute inset-0 pointer-events-none"}`,children:k==="expanded"&&o.segments&&e.jsx("div",{ref:E,className:"space-y-4 relative select-text cursor-text",children:o.segments.map((t,a)=>e.jsxs("div",{className:"flex gap-4 p-3 rounded-lg bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-150",children:[e.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-2",children:[e.jsx("span",{className:"inline-block px-2 py-1 text-xs font-mono bg-blue-100 dark:bg-blue-700 text-blue-800 dark:text-blue-200 rounded",children:pt(t.start)}),t.speaker&&e.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-700 text-green-800 dark:text-green-200 rounded transition-all duration-200",children:Je(t.speaker)})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"text-gray-700 dark:text-gray-200 leading-relaxed break-words select-text",children:es(t)})})]},a))})})]}):e.jsx("div",{style:{height:"600px"},children:e.jsx(Es,{transcriptionId:l,onClose:()=>U("transcript")})})]}),(u||i.status)!=="completed"&&e.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-xl p-6",children:e.jsxs("div",{className:"text-center",children:[(u||i.status)==="processing"&&e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ze,{className:"h-8 w-8 text-blue-500 animate-spin"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-50",children:"Transcription in Progress"}),Te>0&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Processing for ",vr(Te)]})]})]}),e.jsx("div",{className:"w-full max-w-md",children:e.jsx("div",{className:"bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-1000 ease-out animate-pulse",style:{width:"60%"}})})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Converting your audio to text... This may take a few minutes."})]}),(u||i.status)!=="processing"&&e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-50 mb-2",children:[(u||i.status)==="pending"&&"Transcription Queued",(u||i.status)==="uploaded"&&"Ready for Transcription",(u||i.status)==="failed"&&"Transcription Failed"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[(u||i.status)==="pending"&&"Your audio file is in the transcription queue.",(u||i.status)==="uploaded"&&"Start transcription from the audio files list.",(u||i.status)==="failed"&&"There was an error processing your audio file."]}),(u||i.status)==="failed"&&e.jsx("div",{className:"mt-4",children:e.jsxs("button",{onClick:qt,className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[e.jsx(fe,{className:"h-4 w-4"}),"View Logs"]})})]})]})}),e.jsx("div",{className:"fixed bottom-4 left-4 z-[9999]",children:(()=>{const t=f.current?.getDuration()??0,a=t>0?Math.min(1,Math.max(0,R/t)):0,m=64,g=5,w=m/2,T=w-g-2,O=2*Math.PI*T,M=O*(1-a);return e.jsxs("div",{className:"relative",style:{width:m,height:m},"aria-label":"Audio playback controls",children:[e.jsxs("svg",{width:m,height:m,className:"block -rotate-90 drop-shadow-sm",role:"img","aria-hidden":!0,children:[e.jsx("circle",{cx:w,cy:w,r:T,fill:"none",stroke:"currentColor",className:"text-white",strokeWidth:g}),e.jsx("circle",{cx:w,cy:w,r:T,fill:"none",stroke:"currentColor",className:"text-indigo-500 dark:text-indigo-400",strokeWidth:g,strokeLinecap:"round",strokeDasharray:O,strokeDashoffset:M})]}),e.jsx("button",{onClick:Kt,"aria-label":N?"Pause audio":"Play audio",title:N?"Pause":"Play",className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-11 h-11 rounded-full bg-blue-600 hover:bg-blue-700 text-white shadow-lg transition-colors flex items-center justify-center cursor-pointer",children:N?e.jsx(da,{className:"h-5 w-5"}):e.jsx(ca,{className:"h-5 w-5 ml-0.5"})})]})})()}),e.jsx(de,{open:L,onOpenChange:D,children:e.jsxs(ce,{className:"sm:max-w-md bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[e.jsxs(me,{children:[e.jsxs(xe,{className:"text-gray-900 dark:text-gray-100",children:["Download as ",P.toUpperCase()]}),e.jsx(he,{className:"text-gray-600 dark:text-gray-400",children:"Choose your download options for the transcript."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Qe,{htmlFor:"speaker-labels",className:"text-gray-700 dark:text-gray-300",children:"Include Speaker Labels"}),e.jsx(ia,{id:"speaker-labels",checked:H,onCheckedChange:ve,disabled:!o?.segments?.some(t=>t.speaker)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Qe,{htmlFor:"timestamps",className:"text-gray-700 dark:text-gray-300",children:"Include Timestamps"}),e.jsx(ia,{id:"timestamps",checked:G,onCheckedChange:_e,disabled:!o?.segments})]}),!H&&!G&&e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-800 p-3 rounded-md",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(St,{className:"h-4 w-4 text-green-500"}),"Transcript will be formatted as a single paragraph"]})}),(H||G)&&e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-800 p-3 rounded-md",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(St,{className:"h-4 w-4 text-green-500"}),"Transcript will be formatted in segments with selected labels"]})})]}),e.jsxs(wa,{className:"gap-2",children:[e.jsx(Y,{variant:"outline",onClick:()=>D(!1),className:"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsxs(Y,{onClick:is,className:"bg-blue-600 dark:bg-blue-700 hover:bg-blue-700 dark:hover:bg-blue-800 text-white",children:[e.jsx(Nt,{className:"mr-2 h-4 w-4"}),"Download ",P.toUpperCase()]})]})]})}),e.jsx(Ws,{open:ze,onOpenChange:q,transcriptionId:l,onSpeakerMappingsUpdate:os,initialSpeakers:ht()}),e.jsx(de,{open:$a,onOpenChange:t=>{Ae(t),t||lt(!1)},children:e.jsxs(ce,{className:"sm:max-w-lg bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[e.jsxs(me,{children:[e.jsx(xe,{className:"text-gray-900 dark:text-gray-100",children:"Summarize Transcript"}),e.jsx(he,{className:"text-gray-600 dark:text-gray-400",children:"Choose a summarization template"})]}),e.jsxs("div",{className:"py-2 space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(Qe,{className:"text-sm text-gray-700 dark:text-gray-300",children:"Template"}),e.jsxs(js,{open:La,onOpenChange:lt,children:[e.jsx(Ns,{asChild:!0,children:e.jsxs("button",{className:"w-full inline-flex justify-between items-center rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer","aria-label":"Choose template",children:[e.jsx("span",{className:"truncate text-left",children:ne?ne.name:rt?"Loading...":"Select a template"}),e.jsx("span",{className:"text-xs text-gray-500 ml-2 truncate",children:ne?.model?`(${ne.model})`:""})]})}),e.jsx(ks,{className:"w-[var(--radix-popover-trigger-width)] p-0 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:e.jsxs(hr,{children:[e.jsx(fr,{placeholder:"Search templates..."}),e.jsxs(yr,{className:"max-h-64 overflow-auto",children:[e.jsx(br,{children:rt?"Loading...":"No templates found"}),e.jsx(jr,{heading:"Templates",children:ue.map(t=>e.jsx(Nr,{value:t.name,onSelect:()=>{Pt(t.id),lt(!1)},children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm",children:t.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Model: ",t.model||""]})]})},t.id))})]})]})})]}),!rt&&ue.length===0&&e.jsx("p",{className:"text-xs text-gray-500",children:"No templates. Create one in Settings  Summary."}),ne&&!ne.model&&e.jsx("p",{className:"text-xs text-red-600",children:"Selected template has no model configured. Edit it in Settings."})]}),e.jsxs("div",{className:"mt-1 flex items-center justify-end gap-2",children:[e.jsx("button",{className:"px-3 py-1.5 rounded-md bg-gray-200 dark:bg-gray-700",onClick:()=>Ae(!1),children:"Cancel"}),e.jsx("button",{className:"px-3 py-1.5 rounded-md bg-blue-600 text-white disabled:opacity-50",disabled:!nt||!ne?.model,onClick:()=>{Ae(!1),ss()},children:"Summarize"})]})]})]})}),e.jsx(de,{open:Ra,onOpenChange:it,children:e.jsxs(ce,{className:"sm:max-w-3xl bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 max-h-[85vh] overflow-y-auto",children:[e.jsxs(me,{children:[e.jsx(xe,{className:"text-gray-900 dark:text-gray-100",children:"Summary"}),e.jsx(he,{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400",children:ot?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Generating summary..."}),e.jsx("span",{className:"inline-block h-3.5 w-3.5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin","aria-label":"Loading"})]}):e.jsxs("span",{children:["Summary ",ct?"failed":"ready"]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 mb-2",children:[e.jsx("button",{className:"px-2.5 py-1.5 rounded-md bg-blue-600 text-white text-sm",onClick:async()=>{if(Ae(!0),Pt(""),ue.length===0)try{Be(!0);const t=await fetch("/api/v1/summaries",{headers:{...x()}});if(t.ok){const a=await t.json();Rt(a||[])}}finally{Be(!1)}},disabled:ot,children:"Regenerate"}),e.jsx("button",{className:"px-2.5 py-1.5 rounded-md bg-gray-200 dark:bg-gray-700 text-sm",onClick:async()=>{try{await navigator.clipboard.writeText(le||""),ie({title:"Copied to clipboard"})}catch{}},disabled:!le,children:"Copy Text"}),e.jsx("button",{className:"px-2.5 py-1.5 rounded-md bg-gray-200 dark:bg-gray-700 text-sm",onClick:()=>{if(!le)return;const t=He();Ye(le,`${t}-summary.md`,"text/markdown")},disabled:!le,children:"Download .md"})]}),e.jsx("div",{className:"prose prose-gray dark:prose-invert max-w-none min-h-[200px]",children:ct?e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:ct}):le?e.jsx(Fs,{remarkPlugins:[Vs],rehypePlugins:[Os,Bs,Us],children:le}):e.jsx("p",{className:"text-sm text-gray-500",children:ot?"Generating summary...":"No content"})})]})}),e.jsx(de,{open:Oa,onOpenChange:Ut,children:e.jsxs(ce,{className:"sm:max-w-4xl w-[95vw] bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 max-h-[90vh] overflow-y-auto",children:[e.jsxs(me,{children:[e.jsxs(xe,{className:"text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[e.jsx(jt,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"Transcription Execution Details"]}),e.jsx(he,{className:"text-gray-600 dark:text-gray-400",children:"Parameters used and processing time for this transcription"})]}),Ua?e.jsx("div",{className:"py-8 text-center",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-3/4 mx-auto mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-1/2 mx-auto"})]})}):n?e.jsxs("div",{className:"space-y-4 sm:space-y-6 py-2 sm:py-4",children:[n.is_multi_track?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 via-blue-50 to-cyan-50 dark:from-indigo-950/30 dark:via-blue-950/30 dark:to-cyan-950/30 border border-blue-100 dark:border-blue-800/30 rounded-lg p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-indigo-900 dark:text-indigo-100 mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(Ct,{className:"h-5 w-5 text-indigo-600 dark:text-indigo-400"}),"Overall Processing Time"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 text-sm",children:[e.jsxs("div",{className:"bg-white/60 dark:bg-gray-800/30 rounded-md p-3 border border-indigo-100/50 dark:border-indigo-800/50",children:[e.jsx("span",{className:"text-indigo-700 dark:text-indigo-300 font-medium",children:"Started:"}),e.jsx("p",{className:"font-mono text-gray-900 dark:text-gray-100 mt-1 text-xs sm:text-sm",children:new Date(n.started_at).toLocaleString()})]}),e.jsxs("div",{className:"bg-white/60 dark:bg-gray-800/30 rounded-md p-3 border border-indigo-100/50 dark:border-indigo-800/50",children:[e.jsx("span",{className:"text-indigo-700 dark:text-indigo-300 font-medium",children:"Completed:"}),e.jsx("p",{className:"font-mono text-gray-900 dark:text-gray-100 mt-1 text-xs sm:text-sm",children:n.completed_at?new Date(n.completed_at).toLocaleString():"N/A"})]}),e.jsxs("div",{className:"bg-white/60 dark:bg-gray-800/30 rounded-md p-3 border border-indigo-100/50 dark:border-indigo-800/50",children:[e.jsx("span",{className:"text-indigo-700 dark:text-indigo-300 font-medium",children:"Total Duration:"}),e.jsx("p",{className:"font-mono text-xl sm:text-2xl font-bold text-indigo-600 dark:text-indigo-400 mt-1",children:n.processing_duration?`${(n.processing_duration/1e3).toFixed(1)}s`:"N/A"})]})]})]}),n.multi_track_timings&&n.multi_track_timings.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 dark:from-green-950/30 dark:via-emerald-950/30 dark:to-teal-950/30 border border-green-100 dark:border-green-800/30 rounded-lg p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-green-900 dark:text-green-100 mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"h-5 w-5 text-green-600 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Individual Track Processing"]}),e.jsx("div",{className:"space-y-3",children:n.multi_track_timings.map((t,a)=>e.jsxs("div",{className:"bg-white/60 dark:bg-gray-800/30 rounded-md p-3 border border-green-100/50 dark:border-green-800/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-medium text-green-800 dark:text-green-200",children:t.track_name}),e.jsxs("span",{className:"font-mono text-lg font-bold text-green-600 dark:text-green-400",children:[(t.duration/1e3).toFixed(1),"s"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Started:"}),e.jsx("p",{className:"font-mono",children:new Date(t.start_time).toLocaleTimeString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Completed:"}),e.jsx("p",{className:"font-mono",children:new Date(t.end_time).toLocaleTimeString()})]})]})]},a))})]}),n.merge_duration&&e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50 dark:from-orange-950/30 dark:via-amber-950/30 dark:to-yellow-950/30 border border-orange-100 dark:border-orange-800/30 rounded-lg p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-orange-900 dark:text-orange-100 mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"h-5 w-5 text-orange-600 dark:text-orange-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Transcript Merge Phase"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-white/60 dark:bg-gray-800/30 rounded-md p-3 border border-orange-100/50 dark:border-orange-800/50",children:[e.jsx("span",{className:"text-orange-700 dark:text-orange-300 font-medium",children:"Started:"}),e.jsx("p",{className:"font-mono text-gray-900 dark:text-gray-100 mt-1 text-xs",children:n.merge_start_time?new Date(n.merge_start_time).toLocaleTimeString():"N/A"})]}),e.jsxs("div",{className:"bg-white/60 dark:bg-gray-800/30 rounded-md p-3 border border-orange-100/50 dark:border-orange-800/50",children:[e.jsx("span",{className:"text-orange-700 dark:text-orange-300 font-medium",children:"Completed:"}),e.jsx("p",{className:"font-mono text-gray-900 dark:text-gray-100 mt-1 text-xs",children:n.merge_end_time?new Date(n.merge_end_time).toLocaleTimeString():"N/A"})]}),e.jsxs("div",{className:"bg-white/60 dark:bg-gray-800/30 rounded-md p-3 border border-orange-100/50 dark:border-orange-800/50",children:[e.jsx("span",{className:"text-orange-700 dark:text-orange-300 font-medium",children:"Duration:"}),e.jsxs("p",{className:"font-mono text-lg font-bold text-orange-600 dark:text-orange-400 mt-1",children:[(n.merge_duration/1e3).toFixed(1),"s"]})]}),e.jsxs("div",{className:"bg-white/60 dark:bg-gray-800/30 rounded-md p-3 border border-orange-100/50 dark:border-orange-800/50",children:[e.jsx("span",{className:"text-orange-700 dark:text-orange-300 font-medium",children:"Audio Length:"}),e.jsx("p",{className:"font-mono text-lg font-bold text-orange-600 dark:text-orange-400 mt-1",children:(()=>{const t=ja(o);return t?Na(t):"N/A"})()})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(kt,{className:"h-5 w-5 text-slate-600 dark:text-slate-400"}),(()=>{const t=n.actual_parameters?.model_family;return t==="nvidia_parakeet"?"NVIDIA Parakeet Parameters":t==="nvidia_canary"?"NVIDIA Canary Parameters":t==="whisper"?"WhisperX Parameters":"Model Parameters"})()]}),e.jsx("div",{className:"bg-slate-50/50 dark:bg-slate-800/30 border border-slate-200/50 dark:border-slate-700/50 rounded-lg p-3 sm:p-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 text-sm",children:[e.jsxs("div",{className:"bg-white/40 dark:bg-slate-700/20 rounded-md p-3 border border-slate-200/30 dark:border-slate-600/30",children:[e.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-2 text-sm sm:text-base",children:"Model & Configuration"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Model Family:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:(()=>{const t=n.actual_parameters?.model_family;return t==="nvidia_parakeet"?"NVIDIA Parakeet":t==="nvidia_canary"?"NVIDIA Canary":t==="whisper"?"WhisperX":t||"N/A"})()})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Model:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm break-all",children:n.actual_parameters?.model||"N/A"})]}),n.actual_parameters?.model_family==="whisper"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Device:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:n.actual_parameters?.device||"N/A"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Compute Type:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:n.actual_parameters?.compute_type||"N/A"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Batch Size:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:n.actual_parameters?.batch_size||"N/A"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Threads:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:n.actual_parameters?.threads||0})]})]}),n.actual_parameters?.model_family==="nvidia_parakeet"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Context Left:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:n.actual_parameters?.attention_context_left||256})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Context Right:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:n.actual_parameters?.attention_context_right||256})]})]}),n.actual_parameters?.model_family==="nvidia_canary"&&e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Source Language:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:n.actual_parameters?.language||"auto"})]})]})]}),n.actual_parameters?.model_family==="whisper"&&e.jsxs("div",{className:"bg-white/40 dark:bg-slate-700/20 rounded-md p-3 border border-slate-200/30 dark:border-slate-600/30",children:[e.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-2 text-sm sm:text-base",children:"Processing"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Task:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.task||"transcribe"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Language:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.language||"auto"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Diarization:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.diarize?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"VAD Method:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.vad_method||"pyannote"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"VAD Onset:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.vad_onset??.5})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"VAD Offset:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.vad_offset??.363})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Chunk Size:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.chunk_size||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Align Chunks:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.align_chunks?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Align Method:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.align_method||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Return Scores:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.return_scores?"Yes":"No"})]})]})]}),n.actual_parameters?.model_family==="whisper"&&e.jsxs("div",{className:"bg-white/40 dark:bg-slate-700/20 rounded-md p-3 border border-slate-200/30 dark:border-slate-600/30",children:[e.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-2 text-sm sm:text-base",children:"Advanced"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Beam Size:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.beam_size||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Best Of:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.best_of||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Temperature:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.temperature||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"No Speech Threshold:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.no_speech_threshold||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Log Prob Threshold:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.logprob_threshold||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Compression Ratio Threshold:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.compression_ratio_threshold||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Condition On Previous Text:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.condition_on_previous_text?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Initial Prompt:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.initial_prompt||"N/A"})]})]})]}),(n.actual_parameters?.model_family==="nvidia_parakeet"||n.actual_parameters?.model_family==="nvidia_canary")&&e.jsxs("div",{className:"bg-white/40 dark:bg-slate-700/20 rounded-md p-3 border border-slate-200/30 dark:border-slate-600/30",children:[e.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-2 text-sm sm:text-base",children:"Advanced"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Word Boost:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.word_boost?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Punctuation:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.enable_punctuation?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Automatic Capitalization:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.enable_automatic_capitalization?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"ITN:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.enable_inverse_text_normalization?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Speaker Diarization:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.enable_speaker_diarization?"Yes":"No"})]})]})]})]})})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 via-blue-50 to-cyan-50 dark:from-indigo-950/30 dark:via-blue-950/30 dark:to-cyan-950/30 border border-blue-100 dark:border-blue-800/30 rounded-lg p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-indigo-900 dark:text-indigo-100 mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(Ct,{className:"h-5 w-5 text-indigo-600 dark:text-indigo-400"}),"Processing Time"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 text-sm",children:[e.jsxs("div",{className:"bg-white/60 dark:bg-gray-800/30 rounded-md p-3 border border-indigo-100/50 dark:border-indigo-800/50",children:[e.jsx("span",{className:"text-indigo-700 dark:text-indigo-300 font-medium",children:"Started:"}),e.jsx("p",{className:"font-mono text-gray-900 dark:text-gray-100 mt-1 text-xs sm:text-sm",children:new Date(n.started_at).toLocaleString()})]}),e.jsxs("div",{className:"bg-white/60 dark:bg-gray-800/30 rounded-md p-3 border border-indigo-100/50 dark:border-indigo-800/50",children:[e.jsx("span",{className:"text-indigo-700 dark:text-indigo-300 font-medium",children:"Completed:"}),e.jsx("p",{className:"font-mono text-gray-900 dark:text-gray-100 mt-1 text-xs sm:text-sm",children:n.completed_at?new Date(n.completed_at).toLocaleString():"N/A"})]}),e.jsxs("div",{className:"bg-white/60 dark:bg-gray-800/30 rounded-md p-3 border border-indigo-100/50 dark:border-indigo-800/50",children:[e.jsx("span",{className:"text-indigo-700 dark:text-indigo-300 font-medium",children:"Duration:"}),e.jsx("p",{className:"font-mono text-xl sm:text-2xl font-bold text-indigo-600 dark:text-indigo-400 mt-1",children:n.processing_duration?`${(n.processing_duration/1e3).toFixed(1)}s`:"N/A"})]}),e.jsxs("div",{className:"bg-white/60 dark:bg-gray-800/30 rounded-md p-3 border border-indigo-100/50 dark:border-indigo-800/50",children:[e.jsx("span",{className:"text-indigo-700 dark:text-indigo-300 font-medium",children:"Audio Length:"}),e.jsx("p",{className:"font-mono text-xl sm:text-2xl font-bold text-indigo-600 dark:text-indigo-400 mt-1",children:(()=>{const t=ja(o);return t?Na(t):"N/A"})()})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(kt,{className:"h-5 w-5 text-slate-600 dark:text-slate-400"}),(()=>{const t=n.actual_parameters?.model_family;return t==="nvidia_parakeet"?"NVIDIA Parakeet Parameters":t==="nvidia_canary"?"NVIDIA Canary Parameters":t==="whisper"?"WhisperX Parameters":"Model Parameters"})()]}),e.jsx("div",{className:"bg-slate-50/50 dark:bg-slate-800/30 border border-slate-200/50 dark:border-slate-700/50 rounded-lg p-3 sm:p-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 text-sm",children:[e.jsxs("div",{className:"bg-white/40 dark:bg-slate-700/20 rounded-md p-3 border border-slate-200/30 dark:border-slate-600/30",children:[e.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-2 text-sm sm:text-base",children:"Model & Configuration"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Model Family:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:(()=>{const t=n.actual_parameters?.model_family;return t==="nvidia_parakeet"?"NVIDIA Parakeet":t==="nvidia_canary"?"NVIDIA Canary":t==="whisper"?"WhisperX":t||"N/A"})()})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Model:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm break-all",children:n.actual_parameters?.model||"N/A"})]}),n.actual_parameters?.model_family==="whisper"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Device:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:n.actual_parameters?.device||"N/A"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Compute Type:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:n.actual_parameters?.compute_type||"N/A"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Batch Size:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:n.actual_parameters?.batch_size||"N/A"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Threads:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:n.actual_parameters?.threads||0})]})]}),n.actual_parameters?.model_family==="nvidia_parakeet"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Context Left:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:n.actual_parameters?.attention_context_left||256})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Context Right:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:n.actual_parameters?.attention_context_right||256})]})]}),n.actual_parameters?.model_family==="nvidia_canary"&&e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Source Language:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:n.actual_parameters?.language||"auto"})]})]})]}),n.actual_parameters?.model_family==="whisper"&&e.jsxs("div",{className:"bg-white/40 dark:bg-slate-700/20 rounded-md p-3 border border-slate-200/30 dark:border-slate-600/30",children:[e.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-2 text-sm sm:text-base",children:"Processing"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Task:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.task||"transcribe"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Language:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.language||"auto"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Diarization:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.diarize?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"VAD Method:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.vad_method||"pyannote"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"VAD Onset:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.vad_onset??.5})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"VAD Offset:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.vad_offset??.363})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Chunk Size:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.chunk_size||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Align Chunks:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.align_chunks?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Align Method:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.align_method||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Return Scores:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.return_scores?"Yes":"No"})]})]})]}),(n.actual_parameters?.diarize||n.is_multi_track)&&e.jsxs("div",{className:"bg-white/40 dark:bg-slate-700/20 rounded-md p-3 border border-slate-200/30 dark:border-slate-600/30",children:[e.jsxs("h4",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-2 text-sm sm:text-base flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4 text-slate-600 dark:text-slate-400"}),"Speaker Diarization"]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Enabled:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:n.is_multi_track?"Yes (Multi-Track)":n.actual_parameters?.diarize?"Yes":"No"})]}),n.is_multi_track&&e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Number of Tracks:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:n.multi_track_files?.length||0})]}),!n.is_multi_track&&n.actual_parameters?.min_speakers&&e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Min Speakers:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:n.actual_parameters.min_speakers})]}),!n.is_multi_track&&n.actual_parameters?.max_speakers&&e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Max Speakers:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:n.actual_parameters.max_speakers})]}),n.actual_parameters?.diarize_model&&e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Diarization Model:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:wr(n.actual_parameters.diarize_model)})]}),n.actual_parameters?.speaker_embeddings!==void 0&&e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400 text-xs sm:text-sm font-medium",children:"Speaker Embeddings:"}),e.jsx("span",{className:"font-mono text-slate-900 dark:text-slate-100 text-xs sm:text-sm",children:n.actual_parameters.speaker_embeddings?"Yes":"No"})]})]})]}),n.actual_parameters?.model_family==="whisper"&&e.jsxs("div",{className:"bg-white/40 dark:bg-slate-700/20 rounded-md p-3 border border-slate-200/30 dark:border-slate-600/30",children:[e.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-2 text-sm sm:text-base",children:"Advanced"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Beam Size:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.beam_size||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Best Of:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.best_of||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Temperature:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.temperature||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"No Speech Threshold:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.no_speech_threshold||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Log Prob Threshold:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.logprob_threshold||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Compression Ratio Threshold:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.compression_ratio_threshold||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Condition On Previous Text:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.condition_on_previous_text?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Initial Prompt:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.initial_prompt||"N/A"})]})]})]}),(n.actual_parameters?.model_family==="nvidia_parakeet"||n.actual_parameters?.model_family==="nvidia_canary")&&e.jsxs("div",{className:"bg-white/40 dark:bg-slate-700/20 rounded-md p-3 border border-slate-200/30 dark:border-slate-600/30",children:[e.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-2 text-sm sm:text-base",children:"Advanced"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Word Boost:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.word_boost?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Punctuation:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.enable_punctuation?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Automatic Capitalization:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.enable_automatic_capitalization?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"ITN:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.enable_inverse_text_normalization?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Speaker Diarization:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-gray-100",children:n.actual_parameters?.enable_speaker_diarization?"Yes":"No"})]})]})]})]})})]})]}),n.actual_parameters&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3 sm:mb-4 flex items-center gap-2",children:[e.jsx(kt,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),"Parameters Used"]}),e.jsx("div",{className:"bg-gray-900 rounded-md p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-xs sm:text-sm font-mono text-gray-300",children:JSON.stringify(n.actual_parameters,null,2)})})]})]}):e.jsx("div",{className:"py-8 text-center text-gray-500 dark:text-gray-400",children:"No execution data available"})]})}),e.jsx(de,{open:Gt,onOpenChange:xt,children:e.jsxs(ce,{className:"sm:max-w-4xl w-[95vw] bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 max-h-[90vh] overflow-y-auto",children:[e.jsxs(me,{children:[e.jsxs(xe,{className:"text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"Transcription Logs"]}),e.jsx(he,{className:"text-gray-600 dark:text-gray-400",children:"Raw output from the transcription process"})]}),Wt?e.jsx("div",{className:"py-8 text-center",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-3/4 mx-auto mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-1/2 mx-auto"})]})}):e.jsx("div",{className:"bg-gray-900 rounded-md p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-xs sm:text-sm font-mono text-gray-300 whitespace-pre-wrap",children:gt||"No logs available."})})]})}),e.jsx(de,{open:Gt,onOpenChange:xt,children:e.jsxs(ce,{className:"sm:max-w-4xl w-[95vw] bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 max-h-[90vh] overflow-y-auto",children:[e.jsxs(me,{children:[e.jsxs(xe,{className:"text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"Transcription Logs"]}),e.jsx(he,{className:"text-gray-600 dark:text-gray-400",children:"Raw output from the transcription process"})]}),Wt?e.jsx("div",{className:"py-8 text-center",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-3/4 mx-auto mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-1/2 mx-auto"})]})}):e.jsx("div",{className:"bg-gray-900 rounded-md p-4 overflow-x-auto",children:e.jsx("pre",{className:"text-xs sm:text-sm font-mono text-gray-300 whitespace-pre-wrap",children:gt||"No logs available."})})]})}),(st||De)&&J?sa.createPortal(e.jsxs("div",{children:[e.jsx("div",{style:{position:"fixed",inset:0,zIndex:9995,background:"transparent"},onMouseDown:()=>{st&&!De&&(re(!1),Ee(null),window.getSelection()?.removeAllRanges())}}),st&&e.jsx("div",{style:{position:"fixed",left:Ge.x,top:Ge.y,transform:"translate(-50%, -100%)",zIndex:1e4},onMouseDown:t=>t.stopPropagation(),children:e.jsx("div",{className:"bg-gray-900 text-white text-xs rounded-md shadow-2xl px-2 py-1 flex items-center gap-1 pointer-events-auto",children:e.jsxs("button",{type:"button",className:"flex items-center gap-1 hover:opacity-90",onClick:Ja,children:[e.jsx(zs,{className:"h-3 w-3"})," Add note"]})})}),De&&e.jsx("div",{style:{position:"fixed",left:Ge.x,top:Ge.y+18,transform:"translate(-50%, 0)",zIndex:10001},className:"w-[min(90vw,520px)]",onMouseDown:t=>t.stopPropagation(),children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-2xl p-3 pointer-events-auto",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 border-l-2 border-gray-300 dark:border-gray-600 pl-2 italic mb-2 max-h-32 overflow-auto",children:J.quote}),e.jsx("textarea",{className:"w-full text-sm bg-transparent border rounded-md p-2 border-gray-300 dark:border-gray-700 text-gray-900 dark:text-gray-100",placeholder:"Add a note...",value:$t,onChange:t=>Lt(t.target.value),rows:4}),e.jsxs("div",{className:"mt-2 flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",className:"px-2 py-1 text-sm rounded-md bg-gray-200 dark:bg-gray-700",onClick:()=>{Oe(!1),Ee(null)},children:"Cancel"}),e.jsx("button",{type:"button",className:"px-2 py-1 text-sm rounded-md bg-blue-600 text-white",onClick:Ka,children:"Save"})]})]})})]}),document.body):null,tt?sa.createPortal(e.jsx("div",{className:"fixed inset-y-0 right-0 w-[88vw] max-w-[380px] md:max-w-[420px] bg-white dark:bg-gray-900 shadow-2xl z-[9990]",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"px-3 md:px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[e.jsx(bt,{className:"h-4 w-4"})," Notes",e.jsx("span",{className:"ml-1 text-xs rounded-full px-1.5 py-0.5 bg-gray-200 dark:bg-gray-700",children:B.length})]}),e.jsx("button",{type:"button",onClick:()=>at(!1),className:"h-8 w-8 inline-flex items-center justify-center rounded-md text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer","aria-label":"Close notes",children:e.jsx(At,{className:"h-4 w-4"})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-3 md:px-4 pb-4",children:e.jsx(Gs,{notes:B,onEdit:Xa,onDelete:Qa,onJumpTo:t=>{if(f.current){const a=f.current.getDuration();f.current.seekTo(Math.min(.999,Math.max(0,t/a))),_(t)}}})})]})}),document.body):null]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"mx-auto w-full max-w-6xl px-2 sm:px-6 md:px-8 py-3 sm:py-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-3 sm:p-6 text-center",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-gray-50 mb-4",children:"Audio file not found"}),e.jsxs(Y,{onClick:Xt,variant:"outline",className:"cursor-pointer",children:[e.jsx(oa,{className:"mr-2 h-4 w-4"}),"Back to Audio Files"]})]})})})});export{$r as AudioDetailView};
